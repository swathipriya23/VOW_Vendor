<div >
    <h3 style="margin-left: 30px;font-size:25px;font-family:Times New Roman;font-weight:bold;color:blue">Asset Maker Summary</h3><hr>
    <div>
        <form [formGroup]="assetmakersum" (ngSubmit)="searchdata()">
        <div class="col-12 row">
           

                <div class="col-md-3">
                    <mat-form-field class="example-full-width" style="width:220px">
                        <input class="toolbar-search" type="text" matInput autocomplete="off" #inputassetids formControlName="assetid" [matAutocomplete]="assetid">
                        <mat-placeholder>Asset Transaction Id</mat-placeholder>
                        <mat-autocomplete #assetid="matAutocomplete" #assetids (opened)="autocompleteid()">
                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let d of assetidlist" [value]="d.assetdetails_id" (focusout)="assetidselect(d)">{{d.assetdetails_id}}</mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width" >
                        <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="assetvalue">
                        <mat-placeholder>Asset Value</mat-placeholder>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field >
                    <input type='text' matInput autocomplete="off" formControlName="crno">
                    <mat-label>CR No</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field>
                        <mat-label>Cap Date</mat-label>
                        <input [matDatepicker]="picker" [max]="date | date:'yyyy-MM-dd'" matInput formControlName="capdate">
                        <mat-datepicker-toggle matSuffix [for]="picker" ></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>
            <div class="col-12 row" >
                <div class="col-md-3">
                    <mat-form-field style="width:220px">
                        <mat-label>Asset Category</mat-label>
                        <input type="text" #inputcategorys matInput autocomplete="off" [matAutocomplete]="category" formControlName="category" (keypress)="categorykeypress($event)">
                        <mat-autocomplete #categorys #category="matAutocomplete" (opened)="autocompletecategory()">
                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let d of categorylist" [value]="d.subcatname" (focusout)="categoryselect(d)">{{d.subcatname}}</mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field  style="width:220px">
                        <mat-label>Branch Name</mat-label>
                        <input type="text" matInput autocomplete="off" #inputbranchs [matAutocomplete]="branch" formControlName="branch">
                        <mat-autocomplete #btanchs #branch="matAutocomplete" (opened)="autocompletecategorybranch()">
                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                            <ng-container *ngIf="!isLoading">
                
                <mat-option *ngFor="let d of branchlist" [value]="d.name" (focusout)="branchselect(d)">{{d.name}}</mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                  
                    <!-- <button class="btn btn-primary" mat-fab mat-raised-button type="submit" style="border-radius:40px;margin-left: 4px; width:40px;height: 40px;"
                        color="primary"><i class="fa fa-search" aria-hidden="true"></i></button> -->
                        <button  mat-fab  type="submit" style="margin-left: 4px;" color='basic'
                        ><mat-icon>search</mat-icon></button>
                    <!-- <button class="btn " (click)="resets()" mat-fab mat-raised-button type="reset" style="border-radius:40px;margin-left: 4px; width:80px;height: 40px;"
                        color="primary">Reset</button> -->
                        <button mat-fab   color='basic' (click)="resets()" mat-fab mat-raised-button type="reset" style="margin-left: 4px;"
                        >Clear</button>
                   <!-- <button type="button" class="btn btn-outline-primary" data-toggle="modal"
                        data-target="#exampleModal"
                        style="border-radius:40px;margin-left: 4px; width:40px;height: 40px;">
                        <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                    </button>-->
                </div>
                    <div class="col-md-2"><!--class="btn btn-outline-success"-->
                        <!-- <button type="button" class="btn" mat-fab mat-raised-button color="warn" style="border-radius:40px;margin-left: 10px"
                            [routerLink]='"/fa/assetmaker"'><span class="fa fa-plus"></span>Add</button> -->
                            <button type="button"  mat-fab mat-raised-button  style="margin-left: 10px;background-color: rgb(233, 171, 55);" matTooltip="Asset Maker"
                            [routerLink]='"/fa/assetmaker"'><mat-icon>add</mat-icon></button>
                    </div>
                
                </div>
            </form>
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel"
                                        style="font-size:1.2vw;font-weight: bolder;">Depreciation setting</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">

                                    <div>

                                        <form>
                                            <table>
                                                <div>



                                                    <tr>
                                                        <td>

                                                            <mat-form-field style="width: 175px;">
                                                                <mat-label>Depreciating Type</mat-label>
                                                                <input matInput placeholder="Depreciating Type"
                                                                    autocomplete="off" required>
                                                            </mat-form-field>
                                                        </td>
                                                    </tr>
                                                </div>
                                            </table>

                                        </form>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success">Submit</button>

                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            
        <!--</div>-->
    </div>
    <div class="Container" style="margin-left: 30px;">

        <div class="table-responsive table-hover" style="width:98%;margin-top: 1%;font-size:14px">
            <table class="table table-bordered">
                <thead class="table_header">
                    <tr>
                        <th>S.No</th>
                        <th>CR No</th>
                        <th>Asset Transaction ID</th>
                        <th>Product Name</th>
                        <th>Asset Category</th>
                        <th>Asset Sub-Category</th>
                        <th>Cap Date</th>
                        <th>Asset Value</th>
                        <th>Vendor Name</th>
                        <th>Branch Name</th>
                        <th> Request For</th>
                        <th>Rejected Reason</th>
                        <th>Status</th>
                        <th>Employee Asset Mapping</th>

                    </tr>
                </thead>
                
                <tbody>
                    <tr *ngFor="let assetcat of assetcatslist; index as i">
                        <th scope="row">{{ (presentpageloc-1)*pageSize+i+1 }}</th>
                        <td>{{assetcat.crnum}}</td><!-- <td>{{ assetcat.area_occupied}}</td> -->
                        <td>{{assetcat.assetdetails_id}}</td><!-- <td>{{ assetcat.area_occupied}}</td> -->
                       <td>{{assetcat['product_id'].name}}</td> <!-- <td>{{ assetcat.area_occupied}}</td> -->
                       <td>{{assetcat['product_id'].category_id.name ? assetcat['product_id'].category_id.name : '-'}}</td> <!-- <td>{{ assetcat.area_occupied}}</td> -->
                       <td>{{assetcat['product_id']['subcategory_id'].name}}</td>
                       <td>{{assetcat.date | date:"dd-MMM-yyyy"}}</td>
                       <td>{{assetcat.assetdetails_value}}</td> <!-- <td>{{ assetcat.area_occupied}}</td> -->
                       <td>{{assetcat.vendorname}}</td>
                       <td>{{assetcat['branch_id'].name}}</td>
                        <td class="text-center">{{assetcat.requestfor}}</td>
                       <td class="text-center"><button type="button" (click)="clickreason(assetcat)" style="border: none;background: none;color: rgb(119, 119, 190);"><span [matTooltip]="assetcat.reason">Reason</span></button></td>
                        <td>
                            {{assetcat.assetdetails_status}}
                        </td>
                        <td class="text-center"><button disabled mat-mini-fab color="primary" data-toggle="modal" data-target="#split"   matTooltip="Employee Mapping" (click)="openpopupdatafamake(assetcat)"><mat-icon>add</mat-icon></button>
                        </td>
                        <!--     
    <td>
         <button mat-icon-button matTooltip="Delete" class="iconbutton"
         (click)="deletelanlord(landlord)"
    color="primary">
    <mat-icon style="color: gray;" aria-label="Delete">delete</mat-icon>
    </button></td> -->
                    </tr>
                    <tr *ngIf="assetcatslist.length==0">
                        <td colspan="11">No Records Found..</td>
                    </tr>
                </tbody>
            </table>
            <!-- <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 5%;">
    <button mat-icon-button [disabled]="has_previous === false" color="primary"
    (click)="previousClick()">
    <mat-icon >arrow_back</mat-icon>
    </button>
    {{presentpage}}
    <button mat-icon-button [disabled]="has_next === false" color="primary" 
    (click)="nextClick()">
    <mat-icon >arrow_forward</mat-icon>
    </button>
    </div> -->
    <div style="text-align: center;margin-top: 20px;">
        <b>Reason:&nbsp;</b>{{reason}}
    </div>
            <div class="row">
                <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 100px;">
                    <button mat-icon-button [disabled]="!has_previousasset" color="primary"
                        (click)=" previousClick()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{presentpageloc}}
                    <button mat-icon-button [disabled]="!has_nextasset" color="primary" (click)=" nextClick()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </div>
        <button type="button" routerLink="/fa/fa" class="btn btn-outline-success" style="border-radius:30px;height:40px;margin-left:10px"><span
            class="fa fa-arrow-left">Go Back</span></button>
    </div>
    <div  class="modal fade" id="split" data-backdrop="static" data-keyboard="false"  
    role="dialog" tabindex="-5">
        <div class="modal-dialog modal-xl " role="document" >
            <div class="modal-content" >
                <div class="modal-header " style="background: #21cbe5;" ><!--style="background-color:rgb(104, 122, 224)"-->
                    <!-- <h2 class="modal-title" style="margin-left:32%;"><strong>Split Quantity with Location</strong></h2> -->
                    <h1 class="modal-title" style="margin-left:32%;font-family: 'Times New Roman', Times, serif;color: rgb(4, 4, 29);font-size: 20px;">Employee Mapping Details</h1>
                    <button  type="button" class="close"  (click)="dismisspopupdata()">&times;</button>
                    <button #exampleModal style="display: none;" type="button" class="close"  data-dismiss="modal">&times;</button>
                </div>
                <!-- style="height:450px;overflow: scroll;"<h1 style="font-family: 'Times New Roman', Times, serif;color: blue;font-size: 20px;">Employee Mapping Details</h1><hr> -->
                <div class="modal-body"  >  
                    <div class="container">
                        <h1 style="font-size: 18px;font-family: 'Times New Roman', Times, serif;color: blue;">Employee Mapping Create</h1>
                        <form [formGroup]="empmapform">
                            <div class="row">
                                <div class="col-md-4">
                                    <mat-form-field style="width: 250px;">
                                        <mat-label>Employee Name</mat-label>
                                        <input type="text" matInput formControlName="empname" [matAutocomplete]='empref'>
                                        <mat-autocomplete #empref="matAutocomplete"  [displayWith]="empdataintreface"> 
                                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of empdrpdwndata" [value]="d">{{d.full_name}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                        <!-- <mat-autocomplete #empref="matAutocomplete" [displayWith]="empdataintreface">  
                                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of empdrpdwndata" [value]="d">{{d.full_name}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete> -->
                                    </mat-form-field>
                                </div>
                                <div class="col-md-4">
                                    <mat-form-field style="width: 250px;">
                                        <mat-label>Asset Barcode</mat-label>
                                        <input type="text" matInput formControlName="assetbarcode" [matAutocomplete]='emprefid' readonly>
                                        <mat-autocomplete #emprefid="matAutocomplete" (opened)="autocompleteassetid()" [displayWith]="empdatainterfaceassetid"> 
                                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of cpdateidlist" [value]="d">{{d.barcode}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div>
                                
                            </div>
                            <div class="row">
                                <div class="col-md-4" >
                                    <mat-form-field>
                                        <mat-label>From Date</mat-label>
                                        <input [matDatepicker]="pickerd" formControlName="capdate" matInput autocomplete="off">
                                        <mat-datepicker-toggle matSuffix [for]="pickerd"></mat-datepicker-toggle>
                                        <mat-datepicker #pickerd ></mat-datepicker>
                                        </mat-form-field>
                                </div>
                                <div class="col-md-4" >
                                    <mat-form-field >
                                        <mat-label>To Date</mat-label>
                                        <input [matDatepicker]="pick"  formControlName="todate" [disabled]="true" matInput autocomplete="off">
                                        <mat-datepicker-toggle matSuffix [for]="pick"></mat-datepicker-toggle>
                                        <mat-datepicker #pick ></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3">
                                    <div class="col-md-3">
                                        <button type="button"  (click)="getemploueemapdetailscreate()" class="btn btn-outline-success" style="border-radius: 40px;height: 40px;">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="container">
                        <h1 style="font-size: 18px;font-family: 'Times New Roman', Times, serif;color: blue;">Employee Mapping Summary</h1>
                        <form [formGroup]="empmapformsearch">
                            <div class="row">
                                <!-- <div class="col-md-4">
                                    <mat-form-field style="width: 250px;">
                                        <mat-label>Employee Name</mat-label>
                                        <input type="text" matInput formControlName="empname" [matAutocomplete]='emprefs'>
                                        <mat-autocomplete #emprefs="matAutocomplete"  [displayWith]="empdataintreface"> 
                                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of empdrpdwndata" [value]="d">{{d.full_name}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div> -->
                                <div class="col-md-4">
                                    <mat-form-field style="width: 250px;">
                                        <mat-label>Asset Barcode</mat-label>
                                        <input type="text" matInput formControlName="assetbarcode"  [matAutocomplete]='emprefidd'>
                                        <mat-autocomplete #emprefidd="matAutocomplete"  (opened)="autocompleteassetid()" [displayWith]="empdatainterfaceassetid"> 
                                            <mat-option *ngIf="isLoading">Loading..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of cpdateidlist" [value]="d">{{d.barcode}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                        <!-- <mat-autocomplete #empref="matAutocomplete"> [matAutocomplete]='empref'
                                            <mat-option *ngIf="isLoading">Loding..</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let d of empdrpdwndata" [value]="d">{{d.name}}</mat-option>
                                            </ng-container>
                                        </mat-autocomplete> -->
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3">
                                    <button type="button" mat-mini-fab class="btn btn-outline-success" (click)="getemploueemapdetails_search()" style="border-radius: 40px;height: 40px;"><mat-icon>search</mat-icon></button>
                                </div>
                            </div>
                        </form>
                        <br>
                        <div style="height: 500px;overflow-y: auto;width: 830px;">
                            <table class="table table-bordered" >
                                <thead class="table_header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Employee Name</th>
                                        <th>Asset Barcode</th>
                                        <th>Product Name</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let d of empmappingDetails;let i=index">
                                        <td class="text-right">{{i+1}}</td>
                                        <td class="text-left">{{d['emp_name'].code+'-'+d['emp_name'].name}}</td>
                                        <td class="text-left">{{d.barcode}}</td>
                                        <td class="text-left">{{d.product_name!=""?d['product_name'].name:"" }}</td>
                                        <td>
                                            <button type="button" (click)="getemployeeactiveinactive(d)" mat-icon-button [ngClass]="d.status==1?'active':'inactive'" [matTooltip]="d.status==1?'click to inactive':'click to active'"><mat-icon>wb_sunny</mat-icon></button>
                                        </td>
                                    </tr>
                                    <tr *ngIf="empmappingDetails.length==0">
                                        <td colspan="5">
                                            No Records Found..
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <div class="text-right">
                                                    <button mat-icon-button (click)="clickprevious()" [disabled]="!has_empprevious" color="primary">
                                                        <mat-icon>arrow_back</mat-icon>
                                                    </button>
                                                    {{emppresentpage}}
                                                    <button mat-icon-button (click)="clicknext()" [disabled]="!has_empnext" color="primary" >
                                                        <mat-icon>arrow_forward</mat-icon>
                                                    </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>  
                <div class="modal-footer">
                   <!-- <div class="text-center">(click)="closedialog()"-->
                        <button type="button"  (click)="dismisspopupdata()" class="btn btn-danger text-center" style="border-radius: 40px;height: 40px;">Close</button>
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </div>
<br>
