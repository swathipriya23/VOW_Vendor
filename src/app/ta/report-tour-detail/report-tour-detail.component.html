<div *ngIf="showrequirements" style="margin-top:-2%" class="row">
  <div class="col-md-10">
    <label style="color: black;font-size: 20px;font-weight: 500px;margin-left: 7px;margin-top:12px;">
      {{reporttitle}}
    </label>
  </div>
  <div class="col-md-2">
    <button mat-fab type="submit" (click)="reportexceldownload()" matTooltip="Download Report" matTooltipPosition="left"
      style="border-radius:40px;background-color: white;color: black;">
      <mat-icon>file_download</mat-icon>
    </button>
  </div>

</div>
<div *ngIf="!showrequirements" style="margin-top:-2%" class="row">
  <div class="col-md-8">
    <label style="color: black;font-size: 20px;font-weight: 500px;margin-left: 7px;margin-top:12px;">
      {{reporttitle}}
    </label>
  </div>
  <div class="col-md-4">
    <button mat-fab type="submit" (click)="reportexceldownload()" matTooltip="Download Report" matTooltipPosition="left"
      style="border-radius:40px;background-color: white;color: black;">
      <mat-icon>file_download</mat-icon>
    </button>
  </div>
</div>

<div *ngIf="tourrequirementid == '5' ">
  <div class="row">
    <div class="table-responsive" style="padding-left:20px">
      <table class="table" style="margin-top: 10px;width: 290%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Travel No</th>
            <th>Requirement Code</th>
            <th>Reissued Requirement Code</th>
            <th>Booking Date</th>
            <th>Employee ID</th>
            <th>Employee Name</th>
            <th>Purpose</th>
            <th>Client Name</th>
            <th>Travel Status</th>
            <th>Date Of Travel</th>
            <th>Difference in days (DOT Vs Booking date) </th>
            <th>Domestic/International</th>
            <th>From Place</th>
            <th>To Place</th>
            <th>From Time (Depature)</th>
            <th>Vendor Name</th>
            <th>PNR</th>
            <th>Approved By</th>
            <th>Ticket Cost</th>
            <th>Ticket amount for personal</th>
            <th>Reason for weekend Travel</th>
            <th>Website</th>
            <th>Issuance Type</th>
            <th>Ticket No</th>
            <th>Status</th>
            <th>Cancelled Date</th>
            <th>Loss of Cancellation</th>
            <th>Refund Amount</th>
            <th>Refund Date</th>
            <th>Reason for Cancellation/No-show</th>
            <th>Net Amount</th>
            <th>Remarks</th>
            <th>Reference Number</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detail of gettourdetailreportList; index as i">
            <td>{{(presentpage - 1)*10+i+1}}</td>
            <td>{{detail.tour_id}}</td>
            <td>{{detail.requirement_code}}</td>
            
            <td>
              <label [ngStyle]="{color:detail.reissue_code ? 'green':'black'}">{{detail.reissue_code ?
                detail.reissue_code
                : '-'}}</label>
            </td>
            <td>{{detail.created_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.empcode}}</td>
            <td>{{detail.empname}}</td>
            <td>{{detail.purpose_ofvisit}}</td>
            <td>{{detail.client}}</td>
            <td>{{detail.tour_status}}</td>
            <td>{{detail.from_time | date:'dd-MMM-yyyy, EEE HH:mm'}}</td>
            <td>{{detail.difference_indays}}</td>
            <td>{{detail.domestic}}</td>
            <td>{{detail.from_place}}</td>
            <td>{{detail.to_place}}</td>
            <td>{{detail.fromtime}}</td>
            <td>{{detail.vendor_name}}</td>
            <td>{{detail.pnr_no}}</td>
            <td>{{detail.approver}}</td>
            <td>{{detail.ticket_amount | currency:"INR"}}</td>
            <td>{{detail.ticket_amount_personal | currency:"INR"}}</td>
            <td>{{detail.weekend_travel}}</td>
            <td>{{detail.website}}</td>
            <td>{{detail.issuance_type}}</td>
            <td>{{detail.ticket_no}}</td>
            <td>{{detail.booking_status}}</td>
            <td>{{detail.cancelled_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.loss_of_cancelation | currency:"INR"}}</td>
            <td>{{detail.refund_amount | currency:"INR"}}</td>
            <td>{{detail.refund_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.cancel_reason}}</td>
            <td>{{detail.net_amount}}</td>
            <td>{{detail.comments}}</td>
            <td>{{detail.ref_no}}</td>


            <!-- <td >{{detail.ticket_amount |  currency:"INR"}}</td> -->


          </tr>
        </tbody>
      </table>

    </div>

  </div>
</div>

<div *ngIf="tourrequirementid == '1' ">
  <div class="row">
    <div class="table-responsive" style="padding-left:20px">
      <table class="table" style="margin-top: 10px;width: 230%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Travel No</th>
            <th>Requirement Code</th>
            <th>Reissued Requirement Code</th>
            <th>Requested Date</th>

            <th>Booking Date</th>
            <th>Employee ID</th>
            <!-- <th >Branch</th> -->

            <th>Employee Name</th>
            <th>Team</th>

            <th>Purpose</th>
            <th>Client Name</th>

            <th>Approval Status</th>

            <th>Room Type</th>
            <th>Check-In Date</th>
            <th>Check-Out Date</th>
            <th>No of Nights</th>
            <th>Rack rate/night</th>
            <th>Total(A)</th>
            <th>NAC Rates</th>
            <th>Total(B)</th>
            <th>Cost Saved(A-B)</th>
            <th>Web site</th>
            <th>Booked By</th>
            <th>Remarks</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detail of gettourdetailreportList; index as i">
            <td>{{(presentpage - 1)*10+i+1}}</td>
            <td>{{detail.tour_id}}</td>
            <td>{{detail.requirement_code}}</td>
            <td>
              <label [ngStyle]="{color:detail.reissue_code ? 'green':'black'}">{{detail.reissue_code ?
                detail.reissue_code
                : '-'}}</label>
            </td>
            <td>{{detail.request_date | date: 'dd-MMM-yyyy, EEE' }}</td>

            <td>{{detail.created_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.empcode}}</td>
            <!-- <td >{{detail.branch_name}}</td> -->

            <td>{{detail.empname}}</td>
            <td>{{detail.team_name}}</td>

            <td>{{detail.purpose_ofvisit}}</td>
            <td>{{detail.client}}</td>

            <td>{{detail.tour_status}}</td>

            <td>{{detail.room_type }}</td>
            <td>{{detail.from_time | date:'dd-MMM-yyyy, EEE HH:mm'}}</td>
            <td>{{detail.to_time | date:'dd-MMM-yyyy, EEE HH:mm'}}</td>
            <td>{{detail.no_of_nights}}</td>
            <td>{{detail.rack_rate_night | currency:"INR"}}</td>
            <td>{{detail.total_a | currency:"INR"}}</td>
            <td>{{detail.nac_rate | currency:"INR"}}</td>
            <td>{{detail.total_b | currency:"INR"}}</td>
            <td>{{detail.amount_saved | currency:"INR"}}</td>
            <td>{{detail.website}}</td>
            <td>{{detail.created_by}}</td>
            <td>{{detail.comments}}</td>

          </tr>
        </tbody>
      </table>

    </div>

  </div>
</div>

<div *ngIf="tourrequirementid == '2' ">
  <div class="row">
    <div class="table-responsive" style="padding-left:20px">
      <table class="table" style="margin-top: 10px;width: 230%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Travel No</th>
            <th>Requirement Code</th>
            <th>Reissued Requirement Code</th>
            <th>Requested Date</th>

            <th>Booking Date</th>
            <th>Employee ID</th>
            <!-- <th >Branch</th> -->

            <th>Employee Name</th>
            <th>Team</th>
            <th>Cab Type</th>

            <th>Purpose</th>
            <th>Client Name</th>

            <th>Approval Status</th>
            <th>From Place</th>
            <th>Pick up date(DD/MM/YYYY)</th>
            <th>Reporting Place</th>
            <!-- <th>Reporting Time</th> -->
            <th>Instructions</th>
            <th>Cab Segment</th>
            <th>Vendor</th>
            <!-- <th>Payment Mode</th> -->
            <th>Invoice Date(DD/MM/YYYY)</th>
            <th>Invoice no</th>
            <th>Invoice Amount</th>
            <!-- <th>Official/Personal</th> -->
            <th>Remarks</th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detail of gettourdetailreportList; index as i">
            <td>{{(presentpage - 1)*10+i+1}}</td>
            <td>{{detail.tour_id}}</td>
            <td>{{detail.requirement_code}}</td>
            <td>
              <label [ngStyle]="{color:detail.reissue_code ? 'green':'black'}">{{detail.reissue_code ?
                detail.reissue_code
                : '-'}}</label>
            </td>
            <td>{{detail.request_date | date: 'dd-MMM-yyyy, EEE' }}</td>

            <td>{{detail.created_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.empcode}}</td>
            <!-- <td >{{detail.branch_name}}</td> -->

            <td>{{detail.empname}}</td>
            <td>{{detail.team_name}}</td>
            <td>{{detail.cab_type}}</td>

            <td>{{detail.purpose_ofvisit}}</td>
            <td>{{detail.client}}</td>

            <td>{{detail.tour_status}}</td>
            <td>{{detail.from_place}}</td>
            <td>{{detail.from_time| date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.to_place}}</td>
            <!-- <td>{{detail.to_time}}</td> -->
            <td>{{detail.instructions}}</td>
            <td>{{detail.cab_segment}}</td>

            <td>{{detail.vendor_name}}</td>
            <!-- <td>{{detail.payment_mode}}</td> -->
            <td>{{detail.invoice_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.pnr_no}}</td>
            <td>{{detail.invoice_amount | currency:"INR"}}</td>
            <!-- <td>{{detail.official}}</td> -->
            <td>{{detail.comments}}</td>

          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>

<div *ngIf="tourrequirementid == '3' ">
  <div class="row">
    <div class="table-responsive" style="padding-left:20px">
      <table class="table" style="margin-top: 10px;width: 230%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Travel No</th>
            <th>Requirement Code</th>
            <th>Reissued Requirement Code</th>
            <th>Requested Date</th>
            <th>Booking Date</th>
            <th>Employee ID</th>
            <th>Employee Name</th>
            <th>Team</th>
            <th>Purpose</th>
            <th>Client Name</th>
            <th>Approval Status</th>
            <th>Date of Travel</th>
            <th>From Place</th>
            <th>To Place</th>
            <!-- <th>Depature</th> -->
            <th>PNR</th>
            <th>Approved By</th>
            <th>Ticket Cost</th>
            <th>Ticket Cost for Personal</th>
            <th>Booking Status</th>
            <th>Cancelled Date</th>
            <th>Loss of Cancellation</th>
            <th>Refund Amount</th>
            <th>Refund Date</th>
            <th>Reason for Cancellation/No-show</th>
            <th>Net Amount</th>
            <th>Remarks</th>
            <th>Reference Number</th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detail of gettourdetailreportList; index as i">
            <td>{{(presentpage - 1)*10+i+1}}</td>
            <td>{{detail.tour_id}}</td>
            <td>{{detail.requirement_code}}</td>
            <td>
              <label [ngStyle]="{color:detail.reissue_code ? 'green':'black'}">{{detail.reissue_code ?
                detail.reissue_code
                : '-'}}</label>
            </td>
            <td>{{detail.request_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.created_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.empcode}}</td>
            <!-- <td >{{detail.branch_name}}</td> -->
            <td>{{detail.empname}}</td>
            <td>{{detail.team_name}}</td>
            <td>{{detail.purpose_ofvisit}}</td>
            <td>{{detail.client}}</td>
            <td>{{detail.tour_status}}</td>
            <td>{{detail.from_time| date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.from_place}}</td>
            <td>{{detail.to_place}}</td>
            <!-- <td>{{detail.to_time}}</td> -->
            <td>{{detail.pnr_no}}</td>
            <td>{{detail.approver}}</td>
            <td>{{detail.ticket_amount | currency:"INR"}}</td>
            <td>{{detail.ticket_amount_personal | currency:"INR"}}</td>
            <td>{{detail.booking_status}}</td>
            <!-- <td>{{detail.invoice_date | date: 'dd-MMM-yyyy, EEE' }}</td> -->
            <td>{{detail.cancelled_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.loss_of_cancelation | currency:"INR"}}</td>
            <td>{{detail.refund_amount | currency:"INR"}}</td>
            <td>{{detail.refund_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.cancel_reason}}</td>
            <td>{{detail.net_amount}}</td>
            <td>{{detail.comments}}</td>
            <td>{{detail.ref_no}}</td>

          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>

<div *ngIf="tourrequirementid == '4' ">
  <div class="row">
    <div class="table-responsive" style="padding-left:20px">
      <table class="table" style="margin-top: 10px;width: 230%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Travel No</th>
            <th>Requirement Code</th>
            <th>Reissued Requirement Code</th>
            <th>Requested Date</th>
            <th>Booking Date</th>
            <th>Employee ID</th>
            <th>Employee Name</th>
            <th>Team</th>
            <th>Purpose</th>
            <th>Client Name</th>
            <th>Approval Status</th>
            <th>Date of Travel</th>
            <th>From Place</th>
            <th>To Place</th>
            <!-- <th>Depature</th> -->
            <th>PNR</th>
            <th>Approved By</th>
            <th>Ticket Cost</th>
            <th>Ticket Cost for Personal</th>
            <th>Booking Status</th>
            <th>Cancelled Date</th>
            <th>Loss of Cancellation</th>
            <th>Refund Amount</th>
            <th>Refund Date</th>
            <th>Reason for Cancellation/No-show</th>
            <th>Net Amount</th>
            <th>Remarks</th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detail of gettourdetailreportList; index as i">
            <td>{{(presentpage - 1)*10+i+1}}</td>
            <td>{{detail.tour_id}}</td>
            <td>{{detail.requirement_code}}</td>
            <td><label [ngStyle]="{color:detail.reissue_code ? 'green':'black'}">{{detail.reissue_code ?
                detail.reissue_code : '-'}}</label></td>
            <td>{{detail.request_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.created_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.empcode}}</td>
            <!-- <td >{{detail.branch_name}}</td> -->
            <td>{{detail.empname}}</td>
            <td>{{detail.team_name}}</td>
            <td>{{detail.purpose_ofvisit}}</td>
            <td>{{detail.client}}</td>
            <td>{{detail.tour_status}}</td>
            <td>{{detail.from_time| date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.from_place}}</td>
            <td>{{detail.to_place}}</td>
            <td>{{detail.pnr_no}}</td>
            <td>{{detail.approver}}</td>
            <td>{{detail.ticket_amount | currency:"INR"}}</td>
            <td>{{detail.ticket_amount_personal | currency:"INR"}}</td>
            <!-- <td>{{detail.payment_mode}}</td> -->
            <td>{{detail.booking_status}}</td>

            <td>{{detail.cancelled_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.loss_of_cancelation | currency:"INR"}}</td>
            <td>{{detail.refund_amount | currency:"INR"}}</td>
            <td>{{detail.refund_date | date: 'dd-MMM-yyyy, EEE' }}</td>
            <td>{{detail.cancel_reason}}</td>
            <td>{{detail.net_amount}}</td>
            <td>{{detail.comments}}</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>

<div class="table-responsive">

  <table *ngIf="tourrequirementid == 'Travel'" class="table" style="margin-top: 10px;width: 117%;" id='commonstyle'>
    <thead class="table_header">
      <tr>
        <th>S.No</th>
        <th>Travel No</th>
        <th>Travel Requested Date</th>
        <th>From Date </th>
        <th>To Date</th>
        <th>Reason</th>
        <th>Employee Branch</th>

        <th>Approver</th>
        <th>Travel Status</th>
        <th>Claim Status</th>
        <!-- <th>Travel Admin No</th> -->
        <th>Travel Claim Amount</th>
        <th class="lastfixed-header1" data-toggle="modal" data-target="#requirementmodal">Requirements</th>
        <th class="lastfixed-header" data-toggle="modal" data-target="#historymodal">Approval Flow</th>
        <!-- <th class="lastfixed-header">Action</th> -->

      </tr>
      <tr *ngFor="let sum of gettourdetailreportList; let i=index ">
        <td>{{(presentpage-1)*10+i+1}}</td>
        <td>{{sum.id}}</td>
        <td>{{sum.requestdate | date: 'dd-MMM-yyyy, EEE' }}</td>
        <td>{{sum.startdate | date: 'dd-MMM-yyyy, EEE' }}</td>
        <td>{{sum.enddate | date: 'dd-MMM-yyyy, EEE' }}</td>
        <td>{{sum.reason}}</td>
        <td>({{sum.branch_code}}) {{sum.branch_name}}</td>
        <td>({{sum.approver_data.code}}) {{sum.approver_data.name}}</td>
        <td> <label [ngStyle]="{'color':statuscolor(sum.tour_status)}">{{sum.tour_status}}</label></td>
        <td><label [ngStyle]="{'color':statuscolor(sum.claim_status)}">{{sum.claim_status}}</label></td>
        <td>{{sum.total_claimed_amount | currency:"INR" }}</td>
        <td class="lastfixed-header1" [ngStyle]="{'background':((i+1)%2 == 0)? '#fff' : '#EDF8FA' }">
          <button data-toggle="modal" (click)="getrequirement(sum.id)" data-target="#requirementmodal" mat-icon-button>
            <mat-icon>visibility</mat-icon>
          </button>
        </td>
        <td class="lastfixed-header" [ngStyle]="{'background':((i+1)%2 == 0)? '#fff' : '#EDF8FA' }">
          <button data-toggle="modal" (click)="getapprovalflowlsit(sum.id)" data-target="#historymodal" mat-icon-button>
            <mat-icon>visibility</mat-icon>
          </button>
        </td>

      </tr>
    </thead>

  </table>

  <table *ngIf="tourrequirementid == 'Claim'" class="table" style="margin-top: 10px;width: 100%;" id='commonstyle'>
    <thead class="table_header">
      <tr>
        <th>S.No</th>
        <th>Travel No</th>
        <th>TCF number</th>
        <th>Employee Name</th>
        <th>Team</th>
        <!-- <th>Client Name</th> -->
        <th>Expense Month</th>
        <th>Expense Name</th>
        <th>Raised Date</th>
        <th>Claimed Amount </th>
        <th>Cost Center</th>
        <th>Business Segment</th>
        <th>CCBS Amount</th>
        <th>Claim Status</th>
        <th>Approved Date</th>
        <!-- <th>CCBS Percentage</th> -->
        <th>Comments</th>


      </tr>
      <tr *ngFor="let sum of gettourdetailreportList; let i=index ">
        <td>{{(presentpage-1)*10+i+1}}</td>
        <td>{{sum.travel_no}}</td>
        <td>{{sum.tcf_number}}</td>
        <td>{{sum.employee_name}}</td>
        <td>{{sum.team}}</td>
        <!-- <td>{{sum.client}}</td> -->
        <td>{{sum.expense_month}}</td>
        <td>{{sum.expense_name}}</td>
        <td>{{sum.raised_date}}</td>
        <td id="amtper">{{sum.claimed_amount | currency:"INR"}}</td>
        <td>
      <tr *ngFor="let ccbs of sum.ccbs_data; let i=index ">

        <p>{{ccbs.cc_data.name}} <br>
          <!-- <label id="amtper">Amount:</label> {{ccbs.amount | currency:"INR"}} -->
          <!-- <br> <label id="amtper">Percentage:</label> {{ccbs.percentage}}%  -->
        </p>
        <!-- <hr *ngIf="sum.ccbs_data.length > 1 && (i != sum.ccbs_data.length-1)" style="margin: 0%;background-color: black;"> -->
      </tr>
      </td>
      <td>
        <tr *ngFor="let ccbs of sum.ccbs_data; let i=index ">
          <p> {{ccbs.bs_data.name}} <br>
            <!-- <label id="amtper">Amount:</label> {{ccbs.amount | currency:"INR"}} -->
            <!-- <br> <label id="amtper">Percentage:</label> {{ccbs.percentage}}% -->
          </p>
          <!-- <hr *ngIf="sum.ccbs_data.length > 1 && (i != sum.ccbs_data.length-1)" style="margin: 0%;background-color: black;"> -->
        </tr>
      </td>
      <td>
        <tr *ngFor="let ccbs of sum.ccbs_data; let i=index ">

          <p id="amtper"> {{ccbs.amount | currency:"INR"}} </p>
        </tr>
      </td>
      <td><label [ngStyle]="{'color':statuscolor(sum.claim_status_name)}">{{sum.claim_status_name}}</label></td>
      <td>{{sum.approved_date}}</td>
      <td>{{sum.comment}}</td>


      </tr>
    </thead>

  </table>
</div>
<div class="col-md-12 ">
  <div *ngIf="gettourdetailreportList.length==0; else paginationreport" class="NodataAlign text-center">No
    Records Found...
  </div>
  <ng-template #paginationreport>
    <div class="cursor" style="font-size: small;text-align:right; margin-bottom:100px;float: right;">
      <button mat-icon-button [disabled]="has_previous === false" color="primary" (click)="previousClick()">
        <mat-icon>arrow_back
        </mat-icon>
      </button> {{presentpage}}
      <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="nextClick()">
        <mat-icon>arrow_forward
        </mat-icon>
      </button>
    </div>
  </ng-template>
</div>

<div class="modal" id="historymodal" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title" style="font-weight: 700;font-size: large;">Approval Flow</h4>
        <button type="button" class="close" #closeapprovalpopup data-dismiss="modal"
          (click)="clearhistorypopup()">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div *ngIf="!approverloader" style="margin: 200px 0px 200px 350px;" class="loader"></div>

        <div *ngIf="approverloader" class="table-responsive">
          <table class="table table-bordered">
            <thead class="table_header" style="text-align: left;">
              <tr>
                <th>S.No</th>
                <th>Date</th>
                <th>Type </th>
                <th>Employee</th>
                <th>Raised by</th>

                <th>Comment</th>
                <th>Status</th>


              </tr>
            </thead>

            <tbody>
              <tr
                *ngFor="let advanceapprove of approvalflowlist|paginate: { itemsPerPage: pageSize, currentPage: p }; index as i">
                <td scope="row" style="vertical-align: middle;"> {{((p-1)*pageSize)+i+1}}</td>
                <td>{{advanceapprove.approveddate| date:'dd-MMM-yyyy, EEE'}}</td>
                <td>{{advanceapprove.apptype | titlecase}}</td>
                <td>({{advanceapprove.approver_code}}) {{advanceapprove.approvedby}}</td>
                <td>({{advanceapprove.onbehalfof.code}}) {{advanceapprove.onbehalfof.full_name}}</td>

                <td>{{advanceapprove.comment}}</td>
                <td>
                  <p *ngIf="advanceapprove.status == 1">
                    {{advanceapprove.status_name | titlecase}}</p>

                  <p style="color: green;" *ngIf="advanceapprove.status == 3 && advanceapprove.applevel== 1">
                    {{advanceapprove.status_name | titlecase}} By RM</p>

                  <p style="color: red;" *ngIf="advanceapprove.status == 4  && advanceapprove.applevel== 1">
                    {{advanceapprove.status_name | titlecase}} From RM</p>

                  <p *ngIf="advanceapprove.status == 2 && advanceapprove.applevel== 1">
                    {{advanceapprove.status_name | titlecase}} TO RM</p>

                  <p *ngIf="advanceapprove.status == 5 && advanceapprove.applevel== 1">
                    {{advanceapprove.status_name | titlecase}} From RM</p>

                  <p style="color: red;" *ngIf="advanceapprove.status == 4  && advanceapprove.applevel== 3">
                    {{advanceapprove.status_name | titlecase}} From Admin</p>

                  <p *ngIf="advanceapprove.status == 2 && advanceapprove.applevel== 3">
                    {{advanceapprove.status_name | titlecase}} TO Admin</p>

                  <p *ngIf="advanceapprove.status == 5 && advanceapprove.applevel== 3">
                    {{advanceapprove.status_name | titlecase}} From Admin</p>

                  <p style="color: green;" *ngIf="advanceapprove.status == 3 && advanceapprove.applevel== 3">
                    {{advanceapprove.status_name | titlecase}} By Admin</p>
                  <p style="color: red;" *ngIf="advanceapprove.status == 4  && advanceapprove.applevel== 2">
                    {{advanceapprove.status_name | titlecase}} From FH</p>
                  <p style="color: #f5af48;" *ngIf="advanceapprove.status == 2 && advanceapprove.applevel== 2">
                    {{advanceapprove.status_name | titlecase}} To FH</p>

                  <p *ngIf="advanceapprove.status == 5 && advanceapprove.applevel== 2">
                    {{advanceapprove.status_name | titlecase}} From FH</p>

                  <p style="color: green;" *ngIf="advanceapprove.status == 3 && advanceapprove.applevel== 2">
                    {{advanceapprove.status_name | titlecase}} By FH</p>
                </td>



              </tr>

            </tbody>
            <tr>
              <th colspan="7">
                <div class="pagination">
                  <pagination-controls responsive="true" (pageChange)="p = $event"></pagination-controls>
                </div>
              </th>
            </tr>
          </table>
        </div>
      </div>

      <!-- Modal footer -->
      <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div> -->

    </div>
  </div>
</div>


<div class="modal" id="requirementmodal" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title" style="font-weight: 700;font-size: large;">Requirements</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="clearrequirementpopup()">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="loader" *ngIf="!requirementloader" style="margin: 200px 0px 200px 350px;"></div>
        <div style="overflow-x: auto;" *ngIf="requirementloader">

          <table *ngIf="accrequirementdata.length > 0" class="table table-bordered" style="width: 1000px;">
            <thead class="table_header" style="text-align: left;">
              <th>S.No</th>
              <th>Booking Needed For</th>
              <th>Checkin Time</th>
              <th>Checkout Time</th>
              <!-- <th>From Time</th> -->
              <th>Place Of Stay</th>
              <!-- <th>From Place</th> -->
              <!-- <th>To Place</th> -->
              <th>Comments</th>


            </thead>
            <tbody>
              <tr *ngFor="let req of accrequirementdata;let j=index">
                <td>{{j+1}}</td>
                <td>Accomodation</td>
                <td>{{req.checkin_time}}</td>
                <td>{{req.checkout_time}}</td>
                <!-- <td>{{req.from_time}}</td> -->
                <td>{{req.place_of_stay}}</td>
                <!-- <td>{{req.from_place}}</td> -->
                <!-- <td>{{req.to_place}}</td> -->
                <td>{{req.comments}}</td>


              </tr>
            </tbody>
          </table>

          <table *ngIf="requirementdata.length > 0" class="table table-bordered" style="width: 1000px;">
            <thead class="table_header" style="text-align: left;">
              <th>S.No</th>
              <th>Booking Needed For</th>
              <!-- <th>Checkin Time</th> -->
              <!-- <th>Checkout Time</th> -->
              <th>From Time</th>
              <!-- <th>Place Of Stay</th> -->
              <th>From Place</th>
              <th>To Place</th>
              <th>Comments</th>


            </thead>
            <tbody>
              <tr *ngFor="let req of requirementdata;let j=index">
                <td>{{j+1}}</td>
                <td *ngIf="req.booking_needed == 2">Cab</td>
                <td *ngIf="req.booking_needed == 3">Bus</td>
                <td *ngIf="req.booking_needed == 4">Train</td>
                <td *ngIf="req.booking_needed == 5">Flight</td>

                <!-- <td>{{req.checkin_time}}</td> -->
                <!-- <td>{{req.checkout_time}}</td> -->
                <td>{{req.from_time}}</td>
                <!-- <td>{{req.place_of_stay}}</td> -->
                <td>{{req.from_place}}</td>
                <td>{{req.to_place}}</td>
                <td>{{req.comments}}</td>


              </tr>
            </tbody>
          </table>
          <div style="display: flex; justify-content: center;"
            *ngIf="requirementdata.length == 0 && accrequirementdata.length == 0">
            No Requirement
          </div>
        </div>
      </div>


    </div>
  </div>
</div>