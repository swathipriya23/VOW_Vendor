<div class="Container" style="margin-left:25px;">
    <h2>Aging - Report</h2>

    <div>

        <form [formGroup]="knockForm">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-3">
                        <mat-label>From Date</mat-label><br>
                        <mat-form-field class="matformfieldstyle" appearance="outline">
                            <input matInput [matDatepicker]="picker1" (dateChange)="fromDatechange($event.value)"
                                formControlName="fromdate" class="matformfieldinputstyle">
                            <mat-datepicker-toggle matSuffix class="maticonsize"  [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <mat-label>To Date</mat-label><br>
                        <mat-form-field  class="matformfieldstyle" appearance="outline">
                            <input matInput [min]="todatemin" [matDatepicker]="picker2" (dateChange)="toDatechange($event.value)"
                                formControlName="todate"  [disabled]="!fromDatehidden" class="matformfieldinputstyle">
                            <mat-datepicker-toggle matSuffix  class="maticonsize" [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-label>AccountNo</mat-label><br>
                        <mat-form-field  class="matformfieldstyle" appearance="outline" (click)="getAccountList()">
                            <mat-select formControlName="account_no" class="matformfieldinputstyle">
                                <mat-option *ngFor="let ac of AccountList" [value]="ac.id">
                                    {{ac.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="col-md-4">
                        <!-- <div class="col-md-2"> -->

                            <button  mat-fab type="submit"
                                style="border-radius:40px;margin-left: 20px;margin-top: 1rem;background-color: white;"  aria-label="Search"
                                (click)="agingSearch()">
                                <mat-icon>search</mat-icon>
                            </button>
                        <!-- </div> -->
                        <!-- <div class="col-md-2"> -->
    
                            <button mat-fab type="submit"
                                style="border-radius:40px;margin-left: 20px;margin-top: 1rem;background-color: white;color: black;"
                                (click)="agingClear()">Reset</button>
                        <!-- </div> -->
                        <!-- <div class="col-md-2"> -->
    
                            <button type="button" class="btn btn-outline-primary"
                                style="border-radius:40px;margin-left: 20px;margin-top: 1rem;"
                                routerLink="/proofing/ProofingMap">Back</button>
                        <!-- </div> -->

                    </div>




                    <!-- <div class="col-md-2">

                        <button  mat-fab type="submit"
                            style="border-radius:40px;margin-left: 10px;margin-top: 1rem;background-color: white;"  aria-label="Search"
                            (click)="agingSearch()">
                            <mat-icon>search</mat-icon>
                        </button>
                    </div>
                    <div class="col-md-2">

                        <button mat-fab type="submit"
                            style="border-radius:40px;margin-left: 10px;margin-top: 1rem;background-color: white;color: black;"
                            (click)="agingClear()">Reset</button>
                    </div>
                    <div class="col-md-2">

                        <button type="button" class="btn btn-outline-primary"
                            style="border-radius:40px;margin-left: 10px;margin-top: 1rem;"
                            routerLink="/proofing/ProofingMap">Back</button>
                    </div> -->
                   
                </div>
            </div>
        </form>

    </div>
    <div class="container" style="padding-top: 70px;">

        <div class="card">
            <div class="card-header" style="text-align: center;background-color: #F6F6F6;font-size: 19px;">Aging Report
            </div>
            <div class="card-body" style="padding-left: 203px;">
                <div class="container">
                    <div class="row">
                        <table *ngIf="displayagingvalue===true">
                            <thead class="table_header">

                                <tr>
                                    <th class="thcolor">Days</th>
                                    <th class="thcolor">Count</th>



                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let aging of agingsearchdatas; index as i">
                                    <!-- <td></td>
                                    <td>Count</td> -->
                                    
                                    <td *ngIf="aging[0] ?.order==1"> 0-149 Days </td>
                                    <td *ngIf="aging[0] ?.order==2"> 150-179 Days </td>
                                    <td *ngIf="aging[0] ?.order==3"> 180-189 Days </td>
                                    <td *ngIf="aging[0] ?.order==4"> 190-200 Days </td>
                                    <td *ngIf="aging[0] ?.order==5"> >200 Days </td>
                                    <td>
                                        <a *ngIf="aging.length!=1" style="color: blue;cursor: pointer;" data-toggle="modal"
                                            data-target=".bd-reportview-modal-lg" (click)="agingreport_view(aging)">
                                            {{aging.length-1}}</a>
                                        <a *ngIf="aging.length==1" style="color: black;cursor:context-menu"
                                            (click)="agingreport_view(aging)">
                                            {{aging.length-1}}</a>
                                    </td>
                                
                             
                                </tr>

                            </tbody>
                        </table>
                        <table *ngIf="displayagingvalue===false">
                            <thead class="table_header">
                                <tr>
                                  <th class="thcolor">Days</th>
                                  <th class="thcolor">Count</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                                      
                                  <td>0-149 Days</td>
                                  <td>0</td>
                                  
                                </tr>
                                <tr>
                                                      
                                    <td>150-179 Days</td>
                                    <td>0</td>
                                    
                                  </tr>
                                  <tr>
                                                      
                                    <td>180-189 Days</td>
                                    <td>0</td>
                                    
                                  </tr>
                                  <tr>
                                                      
                                    <td>190-200 Days</td>
                                    <td>0</td>
                                    
                                  </tr>
                                  <tr>
                                                      
                                    <td> >200 Days</td>
                                    <td>0</td>
                                    
                                  </tr>
                                
                              </tbody>
                        </table>
                        <!-- <div class="col-6" *ngFor="let aging of agingdatas; index as i">
                     
                <a *ngIf="aging.length!=1" style="color: blue;" data-toggle="modal" data-target=".bd-reportview-modal-lg" (click)="agingreport_view(aging)">
                     {{aging[0] ?.order}} &nbsp;&nbsp;{{aging.length-1}}</a>
                    <a *ngIf="aging.length==1" style="color: blue;"  (click)="agingreport_view(aging)">
                        Order {{aging[0] ?.order}} &nbsp;&nbsp;{{aging.length-1}}</a>
                </div> -->
                    </div>
                </div>
            </div>

        </div>
    </div>
    &nbsp;
    <!-- report View -->
    <div style="padding-top: 70px;">
        <div class="modal fade bd-reportview-modal-lg" data-toggle="modal" data-backdrop="static" data-keyboard="false"
            tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabels">
            <div class="modal-dialog full_modal-dialog"
                style="max-width: 100%;max-height: 100%;width: 100%; height: 100%;border-radius: 0;  width: 100%;height: 100%;padding-left: 20px;padding-bottom: -264px; padding-right: 19px;display: block;">
                <div class="modal-content full_modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">Aging Report</h2>

                        <button type="button" class="close" #closepop data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>


                    </div>

                    <div style="width: 42px;margin-left: 90%;">
                        <button class="btn btn-outline-primary" type="submit" (click)="downloadexl()"
                            style="border-radius:40px;" color="primary" title="Download"> <span class="fa fa-download">
                            </span></button>
                    </div>
                    <div
                        style="height: 400px;overflow: auto;margin-left: 20px;margin-right: 20px;margin-top: 20px;margin-bottom: 20px;">

                        <!-- <button class="btn btn-outline-primary" type="submit" *ngIf="from_date!=''" (click)="downloadexlsearch()"
                    style="border-radius:40px;margin-top: 17px;    margin-left: 97%;" color="primary"> <span class="fa fa-download">
                    </span></button> -->
                    <div class="tableFixHead">
                        <table class="table table-bordered" fixed-header
                            >

                            <thead style="top:0;position: sticky;">
                                <tr class="table_header" fixed-header >
                                    <th>S.No</th>
                                    <th>Branch</th>
                                    <th>Account Number</th>
                                    <th>Amount</th>
                                    <th>Reference Number</th>
                                    <th>Transaction Date</th>
                                    <th>Value Date</th>
                                    <th>Aging</th>
                                </tr>
                            </thead>

                            <tbody>

                                <tr *ngFor="let agingval of reportview; index as j">
                                    <ng-container *ngIf="!agingval.order">
                                        <!-- [ngStyle]="{ 'background-color': colorDta[i] }" -->
                                        <td>{{j}}</td>
                                        <td>{{agingval ?.txn_branch}}</td>
                                        <td>{{agingval ?.account ?.account_number}}</td>
                                        <td style="text-align: end;">{{agingval ?.amount}}</td>
                                        <td>{{agingval ?.ref_no}}</td>
                                        <td>{{agingval ?.date}}</td>
                                        <td>{{agingval ?.value_date}}</td>
                                        <td>{{agingval ?.aging ?.split(',')[0]}}</td>
                                    </ng-container>
                                </tr>

                                <!-- </ng-container> -->
                            </tbody>
                        </table>
                    </div>
                    </div>

                    <div class="modal-footer">

                        <button type="button" class="btn btn-outline-dark" data-dismiss="modal">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end  -->


</div>