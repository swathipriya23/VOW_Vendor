<div style="width:100%">
<div *ngIf="showhdrview">
    <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;">
        <div style="margin-left: 10px;margin-top: 1%; width: 100%;">
        <h2 style="margin-left: 1px;font-weight:bold;">ECF Header</h2>


        <div>
            <form [formGroup]="ecfheaderviewForm" style="margin-left:2%;">
                <table style="margin-bottom: 2%;">
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width: 200px;">
                                    <input matInput placeholder="ECF Type" formControlName="ecftype"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>

                            <td *ngIf="this.ecftypeid == 3">
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Payment For" formControlName="payto"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                            <td *ngIf="this.ecftypeid == 4" >
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Payment For" formControlName="ppx"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left: 50px;">
                                   <input matInput placeholder="Supplier Type" formControlName="supplier_type"
                                    autocomplete="off" readonly>
                                </mat-form-field>


                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 350px;margin-left:50px;">

                                    <input matInput placeholder="Commodity Name" formControlName="commodity_id"
                                    autocomplete="off" readonly>


                                </mat-form-field>
                            </td>
                            <td *ngIf="this.ecftypeid == 2">
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Raiser Branch" formControlName="branch"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                        </tr>
                        <tr *ngIf="this.ecftypeid != 2">
                            <td >
                                <mat-form-field
                                    style="width:200px;">
                                    <input matInput placeholder="Raiser Branch" formControlName="branch"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                            <td style="margin-left: 50px;" *ngIf="this.ecftypeid == 3 &&  this.checkhr == true">

                                <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                    <mat-label style="margin-left: 50px;">Behalf of Self</mat-label>
                                    <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                        style="margin-left: 10px;" [disabled]="showgst">
                                        {{n.display}}
                                    </mat-radio-button>
                                </mat-radio-group>


                            </td>
                            <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Employee Name" formControlName="raised_by"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <mat-form-field style="width: 200px;">
                                    <mat-label>ECF Date</mat-label>
                                    <input matInput readonly  placeholder="ECF Date"
                                        formControlName="ecfdate" >
                                    <!-- <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker> -->
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left:50px;">
                                    <input matInput placeholder="ECF Amount" formControlName="ecfamount"
                                        autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left:50px;">
                                    <input matInput placeholder="Purpose" formControlName="remark" autocomplete="off" readonly>
                                </mat-form-field>
                            </td>
                            <!-- <td>
                                <span class="material-icons" type="button" data-toggle="modal"
                                    style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                                    formControlName="notename">description</span>Add Note
                            </td> -->
                        </tr>
                        <tr>
                            <td>
                            <h3  (click)="gettrandata()" data-toggle="modal"
                            data-target="#showtrandetails" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction Details</h3>
                        </td>
                        <td>
                                        
                                        
                            <h3   data-toggle="modal"
                            data-target=".bd-example-modal-xl" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="View Notes">View Notes</h3>
                        
                    </td>

                         <!-- -------notepad------ -->

                         <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                         aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
                         <div class="modal-dialog modal-xl">
                             <div class="modal-content">
                                 <div class="modal-header">
                                     <h2 class="modal-title" id="exampleModalLongTitle">
                                         Note Pad
                                     </h2>
                                 </div>
                                 <br>
                                 <div style="margin-left: 50px;width:90%;height: 70%;">
                                     <div>

                                         <div [ngxSummernote]="config"
                                             [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                             (mediaDelete)="onDelete($event)"
                                             (summernoteInit)="summernoteInit($event)"
                                             formControlName="notename">
                                         </div>

                                     </div>
                                 </div>
                                 <br>
                                 <div class="modal-footer">
                                     <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                         class="btn btn-outline-primary"
                                         data-dismiss="modal">Close</button> -->

                                     <button type="button" style="border-radius:10px;margin-left: 10px; border-color: black; 
                                         background-color: white;" class="btn btn-light"
                                         data-dismiss="modal">
                                         Close</button>

                                 </div>
                             </div>
                         </div>
                     </div>

                        </tr>

                    </div>
                </table>
            </form>
        </div>

        <h2 style="margin-left: 1px;font-weight:bold;">Invoice Header</h2>
        <div>

            <div class="table-responsive" style="width:100%;margin-top: 1%;">
                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: left;">
                        <tr>

                            <th>S.No</th>
                            <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">Supplier Name</th>
                            <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">Supplier GST No</th>
                            <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">Supplier State</th>
                            <th *ngIf="this.ppxid != 'E'">Invoice No</th>
                            <th *ngIf="this.ppxid != 'E'">Invoice Date</th>
                            <th>Taxable Amount</th>
                            <th *ngIf="this.ecftypeid == 2" >Tax Amount</th>
                            <!-- <th>Roundoff Amount</th>
                            <th>Other Adjustment</th> -->
                            <th>Total Amount</th>
                            <th>Attached PDF</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody >
                        <tr *ngFor="let dtl of cosummarydata; index as i">
                            <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                            <td>{{i+1}}</td>
                            <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">{{dtl?.supplier_id?.name}}</td>
                            <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">{{dtl?.supplier_id?.gstno}}</td>
                            <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'">{{dtl?.supplierstate_id?.name}}</td>
                            <td *ngIf="this.ppxid != 'E'">{{dtl?.invoiceno}}</td>
                            <td *ngIf="this.ppxid != 'E'">{{dtl?.invoicedate|date:'dd/MM/yyyy'}}</td>
                            <td>{{dtl?.invoiceamount| currency:'INR'}}</td>
                            <td *ngIf="this.ecftypeid == 2">{{dtl?.taxamount| currency:'INR'}}</td>
                            <!-- <td>{{dtl.roundoffamt}}</td>
                            <td>{{dtl.otheramount}}</td> -->
                            <td>{{dtl?.totalamount| currency:'INR'}}</td>
                            <td>
                                <tr *ngFor="let file of dtl.file_data; index as j">
                                    <td>
                                        {{j+1}}
                                    </td>
                                    <td>
                                        <a (click)="data(file)" class="btn btn-link" style="cursor: pointer;color:blue;"
                                            matTooltip="View File"  data-target="#my-modal" data-toggle="modal">{{ file.file_name}}</a>
                                    </td>
                                    <td>
                                        <i class="material-icons" (click)="getfiles(file)">
                                            get_app
                                        </i>
                                    </td>
                                </tr>
                                </td>

                            <td style="text-align: center;">
                                <span matTooltip="view" class=" fa fa-eye create " style="color: black;cursor: pointer;"
                                    (click)="Movetodetail(dtl.id)"></span>

                            </td>
                        </tr>
                        <tr *ngIf = "this.ecftypeid == 2">
                            <th class="totaldisplay" colspan="8"  style="text-align: end;">
                                Net Amount:</th>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                        <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'E'" >
                            <th class="totaldisplay" colspan="2"  style="text-align: end;">
                                Net Amount:</th>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                        <tr *ngIf = "this.ecftypeid == 3" >
                            <th class="totaldisplay" colspan="4"  style="text-align: end;">
                                Net Amount:</th>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr> 
                        <tr *ngIf = "this.ppxid == 'S'">
                            <th class="totaldisplay" colspan="7"  style="text-align: end;">
                                Net Amount:</th>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                    </tbody>
                </table>
                <div *ngIf="cosummarydata ?.length == 0" style="margin-left: 42%;">
                    <h3 >Sorry data not found!.. </h3>
                </div>
                <!-- <div class="row" *ngIf="issummarypage">
                <div class="col-sm-12" style="font-size: small;text-align: right; margin-bottom: 50px;">
                    <button mat-icon-button [disabled]="has_pageprevious === false" color="primary"
                        (click)="previousClickPayment()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{ecfpresentpage}}
                    <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>  -->
            </div>
            <br>
           

                <button type="button" class="btn btn-light" style="border-radius:10px;margin-left:450px;
                border-color: black; margin-bottom: 50px;
                background-color: white;" (click)="back()">Back</button>
        </div>

    </div>
</mat-card>

</div>




<div *ngIf="showdtlview">
    <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;">
        <div style="margin-left: 10px;margin-top: 1%; width: 100%;">


        <h2 style="font-weight: bold;margin-left: 1px;">Invoice Header Details</h2>

        <div>
            <form [formGroup]="invoiceheaderdetailForm" style="margin-left:2%;">
                <table style="margin-bottom: 2%;">
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width: 200px;">
                                    <input matInput readonly placeholder="Raiser Code" formControlName="raisorcode"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Raiser Name" formControlName="raisorname"
                                        autocomplete="off">
                                </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>

                            <td style="margin-left: 50px;">

                                <mat-radio-group formControlName="gst" readonly class="inputformatradiobutton">
                                    <mat-label  style="margin-left: 50px;"> GST Applicable</mat-label>
                                    <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                        style="margin-left: 10px;" [disabled]="showgst">
                                        {{n.display}}
                                    </mat-radio-button>
                                </mat-radio-group>

                            </td>
                        </tr>
                        <tr>
                            <td>
                                <mat-form-field style="width: 200px;">
                                    <input matInput readonly placeholder="Supplier Code" formControlName="suppcode"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Supplier Name" formControlName="suppname"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Supplier GST  No" formControlName="suppgst"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Invoice No" formControlName="invoiceno"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                        </tr>

                        <tr>

                            <td>
                                <mat-form-field style="width:200px;">

                                    <mat-label>Invoice Date</mat-label>
                                    <input matInput readonly  placeholder="Invoice Date"
                                        formControlName="invoicedate">
                                    
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Taxable Amount" formControlName="taxableamt"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Tax Amount" formControlName="taxamount"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;">
                                    <input matInput readonly placeholder="Invoice Amount" formControlName="invoiceamt"
                                        autocomplete="off">
                                </mat-form-field>
                            </td>



                        </tr>
                    </div>
                </table>
            </form>
        </div>



       <div *ngIf ="this.ecftypeid !=4">
        <h2 style="font-weight: bold;margin-left: 1px;">Invoice Details</h2>
        <div class="table-responsive" style="width:100%;margin-top: 1%;">
            <table *ngIf="this.ecftypeid != 8" class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                <thead class="table_header" style="text-align: left;">
                    <tr>

                        <th>S.No</th>
                        <th>Item</th>
                       <th>Description</th>
                        <th>HSN Code</th>
                        <th>HSN %</th>
                        <th>UOM</th>
                        <th>Unit Price</th>
                        <th>Quantity</th>
                        <th>Taxable Amount</th>
                        <th>CGST</th>
                        <th>SGST</th>
                        <th>IGST</th>
                        <th>Tax Amount</th>
                        <th>Total Invoice Amount</th>
                        <th>Action</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let invdtl of detailrecords; index as j">
                        <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->

                        <td>{{j+1}}</td>
                        <td>{{invdtl?.productname}}</td>
                        <td>{{invdtl?.description}}</td>
                         <td *ngIf="invdtl?.hsn?.code != 'UNEXPECTED_ERROR'">{{invdtl?.hsn?.code}}</td>
                        <td *ngIf="invdtl?.hsn?.code == 'UNEXPECTED_ERROR'">-</td>
                        <td>{{invdtl?.hsn_percentage}}</td>
                        <td>{{invdtl?.uom?.name}}</td>
                        <td>{{invdtl?.unitprice| currency:'INR'}}</td>
                        <td>{{invdtl?.quantity}}</td>
                        <td>{{invdtl?.amount| currency:'INR'}}</td>
                        <td>{{invdtl?.cgst| currency:'INR'}}</td>
                        <td>{{invdtl?.sgst| currency:'INR'}}</td>
                        <td>{{invdtl?.igst| currency:'INR'}}</td>
                        <td>{{invdtl?.taxamount| currency:'INR'}}</td>
                        <td>{{invdtl?.totalamount| currency:'INR'}}</td>

                        <td style="text-align: center;">
                            <span matTooltip="view" class=" fa fa-eye create " style="color: black;cursor: pointer;"
                                data-toggle="modal" data-target="#showdebitdetails" (click)="getinvdtlid(invdtl.id)"
                               ></span>

                        </td>
                    </tr>

                    <tr>
                        <th class="totaldisplay" colspan="13"  style="text-align: end;">
                            Rounding Off:</th>
                            <td>{{roundoffdata| currency:'INR'}}</td>

                    </tr>
                    <tr>
                        <th class="totaldisplay" colspan="13"  style="text-align: end;">
                            Other Adjustment:</th>
                            <td>{{otheramountdata| currency:'INR'}}</td>

                    </tr>
                    <tr>
                        <th class="totaldisplay" colspan="13"  style="text-align: end;">
                            Net Amount:</th>
                            <td>{{invdetailtotamt| currency:'INR'}}</td>

                    </tr>
                </tbody>
            </table>
            <div *ngIf="detailrecords ?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>
            <!-- <div class="row" *ngIf="issummarypage">
                <div class="col-sm-12" style="font-size: small;text-align: right; margin-bottom: 50px;">
                    <button mat-icon-button [disabled]="has_pageprevious === false" color="primary"
                        (click)="previousClickPayment()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{ecfpresentpage}}
                    <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>  -->
        </div>

        <table *ngIf="this.ecftypeid == 8" class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
            <thead class="table_header" style="text-align: left;">
                <tr>

                    <th>S.No</th>
                    <th>Item</th>
                   <th>Description</th>
                    <th>HSN Code</th>
                    <th>HSN %</th>
                    <th>UOM</th>
                    <th>Unit Price</th>
                    <th>Quantity</th>
                    <th>Taxable Amount</th>
                    <th>CGST</th>
                    <th>SGST</th>
                    <th>IGST</th>
                    <th>Tax Amount</th>
                    <th>Total Invoice Amount</th>
                    <th>Action</th>

                </tr>
            </thead>
            <tbody *ngFor="let dtl of cosummarydata; index as i" >
                <tr *ngFor="let invdtl of dtl.invoicedtl; index as j">
                    <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->

                    <td>{{j+1}}</td>
                    <td>{{invdtl?.productname}}</td>
                    <td>{{invdtl?.description}}</td>
                     <td *ngIf="invdtl?.hsn?.code != 'UNEXPECTED_ERROR'">{{invdtl?.hsn?.code}}</td>
                    <td *ngIf="invdtl?.hsn?.code == 'UNEXPECTED_ERROR'">-</td>
                    <td>{{invdtl?.hsn_percentage}}</td>
                    <td>{{invdtl?.uom}}</td>
                    <td>{{invdtl?.unitprice| currency:'INR'}}</td>
                    <td>{{invdtl?.quantity}}</td>
                    <td>{{invdtl?.amount| currency:'INR'}}</td>
                    <td>{{invdtl?.cgst| currency:'INR'}}</td>
                    <td>{{invdtl?.sgst| currency:'INR'}}</td>
                    <td>{{invdtl?.igst| currency:'INR'}}</td>
                    <td>{{invdtl?.taxamount| currency:'INR'}}</td>
                    <td>{{invdtl?.totalamount| currency:'INR'}}</td>

                    <td style="text-align: center;">
                        <span matTooltip="view" class=" fa fa-eye create " style="color: black;cursor: pointer;"
                            data-toggle="modal" data-target="#showdebitdetails" (click)="getinvdtlid(invdtl.id)"
                           ></span>

                    </td>
                </tr>

                <!-- <tr>
                    <th class="totaldisplay" colspan="13"  style="text-align: end;">
                        Rounding Off:</th>
                        <td>{{roundoffdata| currency:'INR'}}</td>

                </tr>
                <tr>
                    <th class="totaldisplay" colspan="13"  style="text-align: end;">
                        Other Adjustment:</th>
                        <td>{{otheramountdata| currency:'INR'}}</td>

                </tr> -->
                <tr>
                    <th class="totaldisplay" colspan="13"  style="text-align: end;">
                        Net Amount:</th>
                        <td>{{invdtltcfamount| currency:'INR'}}</td>

                </tr>
            </tbody>
        </table>

        
    </div>

    <div *ngIf="this.ecftypeid== 4">
        
        <h2 style="font-weight: bold;margin-left: 1px;">Debit Details</h2>

        <div class="table-responsive" style="width:100%;margin-top: 1%;">
            <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                <thead class="table_header" style="text-align: left;">
                    <tr>
                        <th>S.No</th>
                        <th>Category</th>
                        <th>Sub Category</th>
                        <th>GL Number</th>
                        <th>Business Product Name</th>
                        <th>BS</th>
                        <th>CC</th>
                        <th>Desc</th>
                        <th>Amount</th>
                        <th>Deduction Amount</th>
                        <th>Debit Amount</th>
                        <th>%</th>



                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let debitdtl of advancedebitrecords; index as i">
                        <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                        <td>{{i+1}}</td>
                        <td>{{debitdtl?.category_code?.code}}</td>
                        <td>{{debitdtl?.subcategory_code?.code}}</td>
                        <td>{{debitdtl?.debitglno}}</td>
                        <td>{{debitdtl?.bsproduct?.bsproduct_name}}</td>
                        <td>{{debitdtl?.ccbs?.bs_code?.name}}</td>
                        <td>{{debitdtl?.ccbs?.cc_code?.name}}</td>
                        <td>{{debitdtl?.ccbs?.remarks}}</td>
                        <td>{{debitdtl?.amount| currency:'INR'}}</td>
                        <td>{{debitdtl?.deductionamount| currency:'INR'}}</td>
                        <td>{{debitdtl?.amount| currency:'INR'}}</td>
                        <td>{{debitdtl?.ccbs?.ccbspercentage}}</td>


                    </tr>
                    <tr >
                        <th class="totaldisplay" colspan="8"  style="text-align: end;">
                            Net Amount:</th>
                            <td>{{advdbttotamt| currency:'INR'}}</td>

                    </tr>
                </tbody>
            </table>
            <div *ngIf="advancedebitrecords ?.length == 0" style="margin-left: 42%;">
                <h3 style="font-family: 'Times New Roman', Times, serif;">Sorry data not found!.. </h3>
            </div>

       
        
        </div>
        </div>
        <br>

        <h2 style="font-weight: bold;margin-left: 1px;">Credit Details</h2>

        <div class="table-responsive" style="width:100%;margin-top: 1%;">
            <table  *ngIf="this.ecftypeid != 3 && this.ppxid != 'E' && this.ecftypeid != 8" class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                <thead class="table_header" style="text-align: left;">
                    <tr>

                        <th>S.No</th>
                        <th>PayMode</th>
                        <th>Bank Account No</th>
                        <th>Credit Ref.No</th>
                        <th>Bank Name</th>
                        <th>Branch Name</th>
                        <th>IFSC Code</th>
                        <th>Benificiary Name</th>
                        <th>Taxable Amount</th>
                        <th>GL Number</th>
                        <th>DD Paybranch</th>
                        <th>DD Tranbranch</th>
                        <th>Credit Amount</th>


                    </tr>
                   
                </thead>
                <tbody >
                    <tr *ngFor="let credit of creditrecords; index as i">
                       
                        <td>{{i+1}}</td>
                        <td>{{credit?.paymode_id?.name}}</td>
                        <td><ng-container *ngFor="let datas of credit?.credit_bank?.data;index as j">{{datas?.account_no}}</ng-container></td>
                        <td>{{credit?.creditrefno}}</td>
                        <td><ng-container *ngFor="let datas of credit?.credit_bank?.data;index as j">{{datas?.bank_id?.name}}</ng-container></td>
                        <td><ng-container *ngFor="let datas of credit?.credit_bank?.data;index as j">{{datas?.branch_id?.name}}</ng-container></td>
                        <td><ng-container *ngFor="let datas of credit?.credit_bank?.data;index as j">{{datas?.branch_id?.ifsccode}}</ng-container></td>
                        <td><ng-container *ngFor="let datas of credit?.credit_bank?.data;index as j">{{datas?.beneficiary}}</ng-container></td>
                        <td>{{credit?.taxableamount| currency:'INR'}}</td>
                        <td>{{credit?.creditglno}}</td>
                        <td>{{credit?.ddpaybranch}}</td>
                        <td>{{credit?.ddtranbranch}}</td>
                        <td>{{credit?.amount| currency:'INR'}}</td>

                    </tr>
                    <tr>
                        <th class="totaldisplay" colspan="12"  style="text-align: end;">
                            Net Amount:</th>
                            <td>{{credittotamt| currency:'INR'}}</td>

                    </tr>
                </tbody>
            </table>
            <div *ngIf="creditrecords ?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>

        </div>


            <div class="table-responsive" style="width:100%;margin-top: 1%;">
                <table *ngIf="this.ecftypeid == 3 || this.ppxid == 'E' && this.ecftypeid != 8" class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: left;">
                        <tr>
    
                            <th>S.No</th>
                            <th>PayMode</th>
                            <th>Bank Account No</th>
                            <th>Credit Ref.No</th>
                            <th>Bank Name</th>
                            <th>Branch Name</th>
                            <th>IFSC Code</th>
                            <th>Benificiary Name</th>
                            <th>Taxable Amount</th>
                            <th>GL Number</th>
                            <th>DD Paybranch</th>
                            <th>DD Tranbranch</th>
                            <th>Credit Amount</th>
    
    
                        </tr>
                    </thead>
                    <tbody *ngFor="let dtl of cosummarydata; index as i" >
                        <tr *ngFor="let credit of dtl.credit; index as j">
                           
                            <td>{{j+1}}</td>
                            <td>{{credit?.paymode_id?.name}}</td>
                            <td><ng-container>{{credit?.creditrefno?.account_number}}</ng-container></td>
                            <td *ngIf="credit?.paymode_id?.name == 'ERA'">{{credit?.creditrefno?.account_number}}</td>
                            <td *ngIf="credit?.paymode_id?.name != 'ERA'">{{credit?.creditrefno}}</td>
                            <td><ng-container>{{credit?.creditrefno?.bank_name}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.bankbranch?.name}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.bankbranch?.ifsccode}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.beneficiary_name}}</ng-container></td>
                            <td>{{credit?.taxableamount| currency:'INR'}}</td>
                            <td>{{credit?.creditglno}}</td>
                            <td>{{credit?.ddpaybranch}}</td>
                            <td>{{credit?.ddtranbranch}}</td>
                            <td>{{credit?.amount| currency:'INR'}}</td>
    
                        </tr>
                        <tr>
                            <th class="totaldisplay" colspan="12"  style="text-align: end;">
                                Net Amount:</th>
                                <td>{{credittotamt| currency:'INR'}}</td>
    
                        </tr>
                    </tbody>
                </table>
            <div *ngIf="cosummarydata ?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>

        </div>

        <div class="table-responsive" style="width:100%;margin-top: 1%;">
            <table  *ngIf="this.ecftypeid  == 8" class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                <thead class="table_header" style="text-align: left;">
                    <tr>

                        <th>S.No</th>
                        <th>PayMode</th>
                        <th>Bank Account No</th>
                        <th>Credit Ref.No</th>
                        <th>Bank Name</th>
                        <th>Branch Name</th>
                        <th>IFSC Code</th>
                        <th>Benificiary Name</th>
                        <th>Taxable Amount</th>
                        <th>GL Number</th>
                        <th>DD Paybranch</th>
                        <th>DD Tranbranch</th>
                        <th>Credit Amount</th>


                    </tr>
                   
                </thead>
                <tbody  *ngFor="let dtl of cosummarydata; index as i">
                    <tr *ngFor="let credit of  dtl.credit; index as j">
                       
                        <td>{{j+1}}</td>
                        <td>{{credit?.paymode_id?.name}}</td>
                        <td><ng-container>{{credit?.creditrefno?.account_number}}</ng-container></td>
                            <td *ngIf="credit?.paymode_id?.name == 'ERA'">{{credit?.creditrefno?.account_number}}</td>
                            <td *ngIf="credit?.paymode_id?.name != 'ERA'">{{credit?.creditrefno}}</td>
                            <td><ng-container>{{credit?.creditrefno?.bank_name}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.bankbranch?.name}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.bankbranch?.ifsccode}}</ng-container></td>
                            <td><ng-container>{{credit?.creditrefno?.beneficiary_name}}</ng-container></td>
                        <td>{{credit?.taxableamount| currency:'INR'}}</td>
                        <td>{{credit?.creditglno}}</td>
                        <td>{{credit?.ddpaybranch}}</td>
                        <td>{{credit?.ddtranbranch}}</td>
                        <td>{{credit?.amount| currency:'INR'}}</td>

                    </tr>
                    <tr>
                        <th class="totaldisplay" colspan="12"  style="text-align: end;">
                            Net Amount:</th>
                            <td>{{credittcfamount| currency:'INR'}}</td>

                    </tr>
                </tbody>
            </table>
            <div *ngIf="cosummarydata ?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>

        </div>

        <br>

        <div>
            <form [formGroup]="SubmitApproverForm" style="margin-left:2%;">
                <table style="margin-bottom: 5%;">
                    <div>
                        <tr>

                           
                                <button type="button" class="btn btn-light" style="border-radius:10px;margin-left:450px;
                                border-color: black; margin-bottom: 50px;
                                background-color: white;" (click)="dtlback()">Back</button>
                



                        </tr>
                    </div>
                </table>
            </form>
        </div>






    </div>
    </mat-card>
</div>
</div>





<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="showdebitdetails">
    <div class="modal-dialog modal-xl " style="width: 93%;">
        <div class="modal-content">
            <div class="modal-header" style="background: #21cbe5;">
                <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Debit Details</h2>
                <button type="button" class="close" data-dismiss="modal" #closebutton aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 90%;">
                <div class="container">
                    <div class="row">
                        <div class="table-responsive" style="width:100%;margin-top: 1%;">
                            <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                <thead class="table_header" style="text-align: left;">


                                    <tr>

                                        <th>S.No</th>
                                        <th>Category</th>
                                        <th>Sub Category</th>
                                        <th>GL Number</th>
                                        <th>Business Product Name</th>
                                        <th>BS</th>
                                        <th>CC</th>
                                        <th>Desc</th>
                                        <th>Amount</th>
                                        <th>Deduction Amount</th>
                                        <th>Debit Amount</th>
                                        <th>%</th>



                                    </tr>
                                </thead>
                                <tbody >
                                    <tr *ngFor="let debitdtl of debitrecords; index as i">
                                        <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                                        <td>{{i+1}}</td>
                                        <td>{{debitdtl?.category_code?.code}}</td>
                                        <td>{{debitdtl?.subcategory_code?.code}}</td>
                                        <td>{{debitdtl?.debitglno}}</td>
                                        <td>{{debitdtl?.bsproduct?.bsproduct_name}}</td>
                                        <td>{{debitdtl?.ccbs?.bs_code?.name}}</td>
                                        <td>{{debitdtl?.ccbs?.cc_code?.name}}</td>
                                        <td>{{debitdtl?.ccbs?.remarks}}</td>
                                        <td>{{debitdtl?.amount| currency:'INR'}}</td>
                                        <td>{{debitdtl?.deductionamount| currency:'INR'}}</td>
                                        <td>{{debitdtl?.amount| currency:'INR'}}</td>
                                        <td>{{debitdtl?.ccbs?.ccbspercentage}}</td>


                                    </tr>
                                    <tr>
                                        <th class="totaldisplay" colspan="8"  style="text-align: end;">
                                         Net Amount:</th>
                                        <td>{{debittotamt| currency:'INR'}}</td>
     
                                       </tr>
                                </tbody>
                            </table>
                            <div *ngIf="debitrecords ?.length == 0" style="margin-left: 42%;">
                                <h3 >Sorry data not found!.. </h3>
                            </div>
                        </div>
                        <br>
                        <tr>
                            <td>

                                <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:450px;
                                border-color: black; margin-bottom: 20px;
                                background-color: white;" (click)="debitbacks()">Back</button>

                            </td>
                        </tr>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="exampleModalLongTitle">
                    Note Pad
                </h2>
            </div>
            <br>
            <div style="margin-left: 50px;width:90%;height: 70%;">
                <div>

                    <div [ngxSummernote]="config" [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                        (mediaDelete)="onDelete($event)" (summernoteInit)="summernoteInit($event)"
                        formControlName="content">
                    </div>

                </div>
            </div>
            <br>
            <div class="modal-footer">
                <button type="button" style="border-radius: 40px;margin-left: 10px;text-align: center;"
                    class="btn btn-outline-primary" data-dismiss="modal">Back</button>
            </div>
        </div>
    </div>
</div>





<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="supplierdetailpopup">
    <div class="modal-dialog modal-xl " style="width: 93%;">
        <div class="modal-content">
            <div class="modal-header"  style="background: #21cbe5;">
                <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Supplier Details</h2>
                <button type="button" class="close" data-dismiss="modal" #closebutton aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 90%;">
                <div class="container">
                    <div class="row">
                        <div class="table-responsive" style="width:100%;margin-top: 1%;">
                            <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                <thead class="table_header" style="text-align: left;">


                                    <tr>

                                        <th>S.No</th>
                                        <th>Supplier Name</th>
                                        <th>Supplier PinCode</th>
                                        <th>Supplier GST</th>
                                        <th>Invoice Number</th>
                                        <th>Invoice Date</th>


                                    </tr>
                                </thead>
                                <tbody *ngFor="let dtl of cosummarydata; index as i" >
                                    <!-- <tr *ngFor="let invdtl of dtl.invoicedtl; index as i">
                                        <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td> 
                                        <td>{{i+1}}</td>
                                        <td>{{invdtl?.supplier_name}}</td>
                                        <td>{{invdtl?.pincode}}</td>
                                        <td>{{invdtl?.suppliergst}}</td>
                                        <td>{{invdtl?.invoiceno}}</td>
                                        <td>{{invdtl?.invoicedate|date:'dd/MM/yyyy'}}</td>



                                    </tr> -->
                                </tbody>
                            </table>
                            <div *ngIf="cosummarydata ?.length == 0" style="margin-left: 42%;">
                                <h3 >Sorry data not found!.. </h3>
                            </div>
                        </div>
                        <tr>
                            <td>

                                <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:450px;
                                border-color: black; margin-bottom: 20px;
                                background-color: white;" (click)="debitbacks()">Back</button>

                            </td>
                        </tr>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="showtrandetails">
    <div class="modal-dialog modal-xl " style="width: 93%;">
        <div class="modal-content">
            <div class="modal-header"  style="background: #21cbe5;">
                <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Transaction Details</h2>
                <button type="button" class="close" data-dismiss="modal" #closebutton1 aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 90%;">
                <div class="container">
                    <div class="row">
                        <div class="table-responsive" style="width:100%;margin-top: 1%;">
                            <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                <thead class="table_header" style="text-align: left;">


                                    <tr>

                                        <th>S.No</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Remarks</th>
                                        <th>Employee Name</th>
                                        <th>Approver Name</th>
                                        <th>Approved By</th>
                                       


                                    </tr>
                                </thead>
                                <tbody >
                                    <tr *ngFor="let dtl of tranrecords; index as i">
                                        <td>{{i+1}}</td>
                                        <td>{{dtl?.status}}</td>
                                        <td>{{dtl?.created_date|date:'dd/MM/yyyy'}}</td>
                                        <td>{{dtl?.remarks}}</td>
                                        <td>{{dtl?.from_user?.name}}</td>
                                        <td>{{dtl?.to_user?.name}}</td>
                                        <td>{{dtl?.to_user?.name}}</td>
                                       
                                    </tr>
                                </tbody>
                            </table>
                            <div *ngIf="tranrecords ?.length == 0" style="margin-left: 42%;">
                                <h3 >Sorry data not found!.. </h3>
                            </div>
                            
                            
                            <!-- <div>
                              <tr>
                              <h3 style="color: blue;font-family: 'Times New Roman', Times, serif;">Employee Name : </h3> &nbsp;&nbsp;&nbsp;&nbsp;
                           
                              <h3 style="color: blue;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">Branch Code : </h3>&nbsp;&nbsp;&nbsp;&nbsp;
                            
                              <h3 style="color: blue;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">Designation : </h3>
                            </tr>
                            </div> -->
                        </div>
                        <tr>
                            <td>

                                <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:450px;
                                border-color: black; margin-bottom: 20px;
                                background-color: white;" (click)="tranback()">Back</button>

                            </td>
                        </tr>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>




<div >
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
      id="showattachmentpopup">
      <div class="modal-dialog modal-xl " style="width: 70%;">
        <div class="modal-content">
          <div class="modal-header"  style="background: #21cbe5;">
            <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Attached File</h2>
            <button type="button" class="close" data-dismiss="modal" #closebuttons aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
            <div class="container">
              <div class="row">
                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                    <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                        <thead class="table_header" style="text-align: left;">

                      <tr>
                        <th style="text-align: center;">S.No</th>
                        <th style="text-align: center;">File Name</th>
                        <th style="text-align: center;">View File</th>
                        <th style="text-align: center;">Download File</th>


                      </tr>
                    </thead>
                    <tbody *ngFor="let data of cosummarydata; index as i">
                      <tr *ngFor="let attach of data.file_data; index as i">
                        <td style="text-align: center;">{{i+1}}</td>
                        <td style="text-align: center;">{{attach?.file_name}}</td>
                        <td style="text-align: center;color:blue;">
                          <div matTooltip="View" class="fa fa-arrow-up" aria-hidden="true" 
                            data-toggle="modal" data-target="#my-modal" 
                            (click)="data(attach)" >

                           
                          </div>
                        </td>
                       
                        <td style="text-align: center;">
                          <button class="btn btn-outline-primary" type="submit"
                          (click)="getfiles(attach)" style="border-radius:40px;margin-left: 15px;" color="primary"
                           >
                            <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                </div>
                <tr>
                    <td>

                        <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:350px;
                        border-color: black; margin-bottom: 20px;
                        background-color: white;" (click)="fileback()">Back</button>

                    </td>
                </tr>
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="showimageHeaderAPI" id="my-modal" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
  tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
      <div class="modal-content">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
          <div class="modal-body">
              <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;">

          </div>
      </div>
  </div>
</div>

<div *ngIf="showimagepdf" id="my-modal" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
  tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
      <div class="modal-content">
          <div class="modal-header" style="background:#21cbe5;">
              <h2 class="modal-title">ECF Attachments</h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <pdf-viewer  [src]="pdfurl" [original-size]="false" [render-text]='false'
            [show-borders]="true" [fit-to-page]="true" [show-all]="true"
            style="display: block; height: 600px;" [fit-to-page]="true">
          </pdf-viewer>
      </div>
  </div>

</div>




<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" [fullScreen]="true" type="ball-spin-clockwise">
  <p style="color: white">Please Wait. </p>
</ngx-spinner>