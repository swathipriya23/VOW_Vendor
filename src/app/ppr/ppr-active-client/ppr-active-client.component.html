<div class="container" style="margin-top: 20px;">
    <form [formGroup]="ppractiveclient">

        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-3">

                            <!-- <mat-form-field class="example-full-width">
                                <mat-label>bussines</mat-label>
                                <input type="text" placeholder="Pick one" aria-label="bussines" matInput
                                    formControlName="business_Search" [matAutocomplete]="auto" required>
                                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayfnbussines">
                                    <mat-option *ngFor="let option of BsccSearch" [value]="option">
                                        {{option.bussines_name}}
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field> -->
                            <mat-form-field (click)="allocationform_search()" style="width: 220px;">
                                <mat-label>Business</mat-label>
                                <input #bssearchInput placeholder="Business" matInput formControlName="business_Search"
                                    [matAutocomplete]="bssearchAutoComplete" >
                                <mat-autocomplete #bssearchAutoComplete="matAutocomplete" [displayWith]="displaybspprsearch"
                                (opened)="allocationfromscroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let bscode of BsccSearch" [value]="bscode" >
                                            {{bscode.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>

                        </div>
                        <div class="col-md-3">
                            <mat-form-field style="width: 100%;"  (click)="this.ppractiveclient.value.business_Search==null || this.ppractiveclient.value.business_Search==undefined || this.ppractiveclient.value.business_Search=='' ? '' : asset_dropdown()">
                                <mat-label>Asset class</mat-label>
                                <mat-chip-list #assetchip>
                                    <mat-chip *ngFor="let pro of chipSelectedprod" [selectable]=true [removable]=true
                                        (removed)="removedprod(pro)" [readonly]="this.ppractiveclient.value.business_Search==null || this.ppractiveclient.value.business_Search==undefined || this.ppractiveclient.value.business_Search==''"> {{pro.name}}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                    <input #chipinput [formControl]="assestgrp" [matAutocomplete]="asset"
                                        [matChipInputFor]="assetchip"
                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                        [matChipInputAddOnBlur]=true
                                        [readonly]="this.ppractiveclient.value.business_Search==null || this.ppractiveclient.value.business_Search==undefined || this.ppractiveclient.value.business_Search==''">
                                </mat-chip-list>
                                <mat-autocomplete #asset="matAutocomplete" (optionSelected)="ppractiveSelected($event)">
                                    <mat-option *ngFor="let prod of assetList" [value]="prod"> {{prod.name}}
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>


                            <!-- <mat-form-field (click)="asset_dropdown()">
                                <mat-label>Assest class</mat-label>
                                <input placeholder="Assest class" matInput [formControl]="assestgrp" #chipinput
                                    [matAutocomplete]="asset" required>
                                <mat-autocomplete #asset="matAutocomplete" [displayWith]="displayfnassest">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let asset of assetList" [value]="asset">
                                            {{asset.asset_name}} </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field> -->
                        </div>
                        <div class="col-md-3">

                            <mat-form-field (click)="product_search()">
                                <mat-label>Product</mat-label>
                                <input placeholder="Product" matInput formControlName="productgrp" #product
                                    [matAutocomplete]="productsearch">
                                <mat-autocomplete #productsearch="matAutocomplete" [displayWith]="displayfnproductdisp"
                                    (opened)="autocompleteprodutsearch()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let productdata of productList" [value]="productdata">
                                            {{productdata.bsproduct_name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>

                        <div class="col-md-3">
                            <mat-form-field (click)="client_droupdown('CLIENT',assestgrp?.value?.id)">
                                <mat-label>Client</mat-label>
                                <input placeholder="Client" matInput formControlName="client_search" #client
                                    [matAutocomplete]="clientsearch">
                                <mat-autocomplete #clientsearch="matAutocomplete" [displayWith]="displayfnclient_search"
                                    (opened)="autocompleteclient_search('CLIENT',assestgrp?.value?.id)">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let client of client_data" [value]="client">
                                            {{client.client_name}} </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field (click)="rm_droupdown('RM',assestgrp?.value?.id)">
                                <mat-label>RM</mat-label>
                                <input placeholder="RM" matInput formControlName="rm_search" #rm
                                    [matAutocomplete]="rmsearch">
                                <mat-autocomplete #rmsearch="matAutocomplete" [displayWith]="displayfnrm_search"
                                    (opened)="autocompleterm_search('RM',assestgrp?.value?.id)">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let rm of rm_data" [value]="rm">
                                            {{rm.rm_name}} </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field class="example-full-width">
                                <mat-label>From Date</mat-label>
                                <input matInput [matDatepicker]="picker1" formControlName="client_fromdate"
                                    (dateChange)="clear_todate($event.value)" readonly required>
                                <mat-datepicker-toggle matSuffix [for]="picker1">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker1 startView="multi-year"></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field class="example-full-width">
                                <mat-label> To Date</mat-label>
                                <input matInput [matDatepicker]="picker2" formControlName="client_todate"
                                    [min]="maxDate"  readonly required>
                                <mat-datepicker-toggle matSuffix [for]="picker2">
                                    <mat-icon matDatepickerToggleIcon
                                        (click)="min_todate(ppractiveclient.value.client_fromdate)">keyboard_arrow_down
                                    </mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker2 startView="multi-year"></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <!-- <div class="col-md-3">
                        <mat-form-field class="datepicker">
                            <input matInput [matDatepicker]="dp" placeholder="Month" [formControl]="date">
                            <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                            <mat-datepicker #dp [calendarHeaderComponent]="exampleHeader" startView="year"
                                (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                            </mat-datepicker>
                        </mat-form-field>
                    </div> -->
                        <div class="col-md-2">
                            <div style="text-align: center;cursor: pointer;">
                                <button class="btn btn-outline-primary" style="border-radius: 40px;"
                                    (click)="pprsearch(assestgrp,ppractiveclient,monthsearch)">
                                    Search
                                </button>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div style="text-align: center;cursor: pointer;">
                                <button class="btn btn-outline-primary" style="border-radius: 40px;"
                                    (click)="pprsearch_clear(assestgrp,ppractiveclient)">
                                    Clear
                                </button>
                            </div>
                        </div>
                        <!-- <div class="col-md-3">
                            <button  class="btn btn-outline-primary" style="border-radius: 40px;" data-toggle="modal" data-target=".bd-fileupload-modal-lg">
                            <mat-icon>upload</mat-icon>Upload
                        </button> 
                        </div>-->
                    </div>

                </div>

            </div>
        </div>
    </form>
    <div>
        <!--  -->
        <h3 style="text-align: end; font-weight: bold;color: blue;margin-right: 20px;" [hidden]="supplierview">Amounts In Crores
            &nbsp;&nbsp;&nbsp;&nbsp;<button class="btn btn-outline-primary" matTooltip="Download"
                style="border-radius: 40px;" (click)="exceldownload()"><i class="fa fa-download"
                    aria-hidden="true"></i></button></h3>


        <!-- overflow: auto;
   
    max-height: 330px; -->
        <div class="row row-cols-md-1" style="margin-bottom: 2%;    overflow: auto;" [hidden]="supplierview">
            <!-- [hidden]="supplierview" -->
            <div class="col">
                <div class="card" id='activeclient-table'>
                    <div class="card-header">
                        <div>
                            <p style="text-align: start;">Active Client #</p>
                            <p style="float: right;"><button class="btn btn-outline-primary" matTooltip="Upload"
                                    style="border-radius: 40px;" data-toggle="modal" (click)="fileuploadopen('Active Client',1)"
                                    data-target=".bd-fileupload-modal-lg"><i class="fa fa-upload"
                                        aria-hidden="true"></i></button></p>

                        </div>
                        <!-- <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#multiCollapseExample2" aria-expanded="false" aria-controls="multiCollapseExample2">
                    </button> -->
                    </div>
                    <!-- <div class="collapse multi-collapse" id="multiCollapseExample2"> -->

                    <div class="card-body">

                        <div *ngIf="activeclient_summary?.length!=0" class="tableFixHead">
                            <table class="table table-bordered"  fixed-header>

                                <tbody>
                                    <tr >
                                        <th style="text-align: center;background-color: #00d7ff;">Name</th>
                                        <td *ngFor="let activeclient of activeclient_summary;" style="background-color: #00d7ff;" >
                                            {{activeclient.asset_name}}</td>
                                        <td style="background-color: #00d7ff;">Total</td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;">BOP</th>
                                        <td *ngFor="let activeclient of activeclient_summary;">{{activeclient.bop}}</td>
                                        <td>{{boptotalamount}}</td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;background-color: #EDF8FA;">New</th>
                                        <td *ngFor="let activeclient of activeclient_summary;" style="background-color: #EDF8FA;">
                                            {{activeclient.new_client}}</td>
                                            <td style="background-color: #EDF8FA;">{{new_clientamount}}</td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;">Attrition</th>
                                        <td *ngFor="let activeclient of activeclient_summary;">
                                            {{activeclient.attrition}}</td>
                                            <td>{{attritionamount}}</td>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;background-color: #EDF8FA;">Closing</th>
                                        <td *ngFor="let activeclient of activeclient_summary;" style="background-color: #EDF8FA;">{{activeclient.closing}}
                                        </td>
                                        <td style="background-color: #EDF8FA;">{{closingamount}}</td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <!-- <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>BOP</th>
                                    <th>New</th>
                                    <th>Attrition</th>
                                    <th>Closing</th>
                                </tr>
                            </thead>
                            <tbody cdkDropList  (cdkDropListDropped)="onDrop($event)">
                                <tr cdkDrag *ngFor="let d of activeclient_summary ">
                                    <td>{{d.asset_name}}</td>
                                    <td>{{d.bop}}</td>
                                    <td>{{d.new_client}}</td>
                                    <td>{{d.attrition}}</td>
                                    <td>{{d.closing}}</td>
                                </tr>
                            </tbody>
                        </table> -->
                        <div style="text-align: center;" id='activeclient-table'
                            *ngIf="activeclient_summary?.length==0">No Data Found</div>

                        <!-- <div style="margin-bottom: 5%;font-size: small;text-align:right;">
                        <button mat-icon-button [disabled]="has_previous === false" color="primary"
                            (click)="previousClick()">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{presentpage}}
                        <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="nextClick()">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>

                    </div> -->
                        <!-- </div> -->
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" id='typelist-table'>
                    <div class="card-header">
                        <!-- <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#multiCollapseExample3" aria-expanded="false" aria-controls="multiCollapseExample3"> -->
                        <div>
                            <p style="text-align: start;">Active Client Typelist</p>
                            <p style="float: right;color: #4b3ce5;">{{fromdate}} &nbsp; - &nbsp; {{todate}} 
                                <!-- <button class="btn btn-outline-primary" matTooltip="Upload"
                                style="border-radius: 40px;" data-toggle="modal" (click)="fileuploadopen('Active Client Typelist',2)"
                                data-target=".bd-fileupload-modal-lg"><i class="fa fa-upload"
                                    aria-hidden="true"></i></button> -->
                                </p>
                        </div>

                        <!-- </button> -->
                    </div>
                    <!-- <div class="collapse multi-collapse" id="multiCollapseExample3"> -->

                    <div class="card-body">

                        <div style="margin-top: 6%;" class="tableFixHead" *ngIf="!show_and_hide">
                            <table class="table table-bordered"  fixed-header>


                                <thead>
                                    <tr class="backcolor">
                                        <th >Name</th>
                                        <ng-container style="text-align: center;"
                                            *ngFor="let headername of header_name;let i=index">
                                            <th >{{headername}}</th>
                                            <!-- *ngIf="i<3" -->
                                        </ng-container>
                                    </tr>
                                </thead>


                                <tbody cdkDropList (cdkDropListDropped)="onDrop($event)">

                                    <tr cdkDrag *ngFor="let datas of ppr_clienttypelist;let i=index">
                                        <!-- | paginate: { itemsPerPage: numberofitem, currentPage: p } -->
                                        <td  [ngStyle]="i%2==0?{'background-color':'white'} :{'background-color': '#EDF8FA'}">{{datas.name}}</td>
                                        <!-- <td>
                                        <div  *ngIf="datas?.value.length == 0" style="text-align: right;">00</div>
                                        <div  *ngIf="datas?.value.length != 0" style="text-align: right;">{{datas.value/10000000 | number:'1.1-2'}}
                                        </div>
                                        </td> -->
                                        <ng-container *ngFor="let com of datas.value;let j=index">
                                        <!-- <ng-container *ngIf="j<3"> -->
                                            
                                            <td [ngStyle]="i%2==0?{'background-color':'white'} :{'background-color': '#EDF8FA'}">
                                                <div *ngIf="datas?.value.length != 0 && datas?.name!='Growth OWN';"
                                                    style="text-align: right;">
                                                    {{datas.value[j]/10000000 | number:'1.1-2'}}
                                                </div>
                                                <div *ngIf="datas?.value.length != 0 && datas?.name=='Growth OWN';"
                                                    style="text-align: right;">
                                                    {{datas.value[j] | number:'1.1-2'}}
                                                </div>

                                            </td>
                                            
                                        <!-- </ng-container> -->
                                    </ng-container>


                                        <td *ngIf="datas?.value.length == 0;" [ngStyle]="i%2==0?{'background-color':'white'} :{'background-color': '#EDF8FA'}">0.00</td>

                                        <!-- <td>{{datas.value}}</td> -->
                                    </tr>
                                </tbody>
                            </table>
                            <!-- <div class="pagination">
                                    <pagination-controls (pageChange)="p = $event"></pagination-controls>
                                  </div> -->
                            <!-- <table class="table table-bordered" fixed-header id="commonstyle">
                                <thead>
                                    <th>Name</th>
                                    <th>{{ header_name }}</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let typelist of ppr_clienttypelist;let i=index">
                                        <td>{{typelist.name}}</td>
                                        <td>{{typelist.value/10000000 | number : '1.2-2'}} </td>
                                    </tr>
                                </tbody>
                            </table> -->

                        </div>
                        <div style="text-align: center;" *ngIf="show_and_hide">No Data Found</div>

                    </div>
                    <!-- </div> -->
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <div class="card-header">
                        <!-- <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#multiCollapseExample4" aria-expanded="false" aria-controls="multiCollapseExample4"> -->
                       
                        <div>
                        <p style="text-align: start;"> Profitability Report Details</p>
                        <p style="float: right;"><button class="btn btn-outline-primary" matTooltip="Upload"
                            style="border-radius: 40px;" data-toggle="modal" (click)="fileuploadopen('Income',3)"
                            data-target=".bd-fileupload-modal-lg"><i class="fa fa-upload"
                                aria-hidden="true"></i></button></p>
                        </div>
                        <!-- </button> -->
                    </div>
                    <!-- <div class="collapse multi-collapse" id="multiCollapseExample4"> -->

                    <div class="card-body">
                        <div  style="overflow-y: hidden;overflow-x: auto; margin-right: 2%;
                        margin-left: 2%;">
                        <div cdkDropList class="example-list" (cdkDropListDropped)="dropincome($event)">
                        <table class="table table-bordered" style="display: inline-table;table-layout: fixed;" id="commonstyle"
                            fixed-header>
                            <thead>
                                <tr>
                                    <th style="text-align: center;">Name</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let level of levelslist; let k = index" cdkDrag>
                                <ng-container *ngIf="level.ind==2">
                                    <tr>
                                        <td style="background-color: #c6e5ea; text-align: center;font-size: 14px;">
                                            <a style="color: black;" (click)="expant_level(level.ind,assestgrp,level,monthsearch)" (click)="level.expanded = !level.expanded">{{ level.name }}
                                            </a>
                                            <!-- <button class="btn btn-outline-primary" matTooltip="Upload"
                                            style="border-radius: 40px;float: right;" data-toggle="modal" 
                                            data-target=".bd-otheroperatingexpupload-modal-lg">
                                            <i class="fa fa-upload"
                                            aria-hidden="true"></i>
                                            </button> -->
                                            <button class="btn btn-outline-primary" matTooltip="Upload"
                                            style="border-radius: 40px;float: right;" data-toggle="modal" 
                                            (click)="fileuploadopen('Expense',4)"
                                            data-target=".bd-fileupload-modal-lg">
                                            <i class="fa fa-upload"
                                            aria-hidden="true"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </ng-container>
                              
                                <ng-container *ngIf="level.ind!=2">
                                    <tr>
                                        <td (click)="expant_level(level.ind,assestgrp,level,monthsearch)"
                                            style="background-color: #c6e5ea; text-align: center;font-size: 14px;"
                                            (click)="level.expanded = !level.expanded">
                                            <a style="color: black;">{{ level.name }}</a>
                                        </td>
                                    </tr>
                                </ng-container>

                                <ng-container *ngIf="level.ind == 0">
                                    <ng-container *ngIf="level.expanded">
                                        <div class="card">
                                            <div class="card-body">
                                        <div id="income-header" >
                                            <!-- <table class="table table-bordered" style="width: 93%;margin-left: 64px;" fixed-header id="commonstyle">
                                                <thead > -->
                                                    <div style="margin-top: 2%;" style="    overflow: auto;">
                                                        <table class="table table-bordered"  fixed-header>
                                                            <thead>
                                                    <tr class="backcolor" >
                                                    <th >Name</th>
                                                    <th *ngFor="let headername of headername"
                                                        style=" white-space: nowrap;">
                                                        {{ headername }}
                                                    </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let income of incomedata;index as i;let last=last">
                                                        <td [ngStyle]="{'padding':'5px','padding-left':income.Padding_left}" >
                                                            <ng-container *ngIf="!last"> 
                                                                <div *ngIf="income.Padding_left!=100px">
                                                                    <a [style]="{ color: income.color }"
                                                                    class="ng-binding"
                                                                    (click)="income_treelevel_click(i,income,incomedata)">
                                                                    
                                                                    {{income?.name}}</a>
                                                                </div>
                                                                <div *ngIf="income.Padding_left==120px"  [style]="{ color: income.color }">
                                                                    {{income?.name}}
                                                                </div>
                                                            </ng-container>
                                                            <ng-container *ngIf="last" [style]="{ color: income.color }">
                                                               
                                                                {{income?.name}}
                                                            </ng-container>
                                                            
                                                        </td>
                                                        
                                                            <td class="tablechange" *ngFor="let val of income.amount" style="text-align: right;">
                                                                <div *ngIf="val==0">0.00</div>
                                                                <div *ngIf="val!=0"> {{val/10000000 | number : '1.2-2'}}</div>

                                                               
                                                                <!-- <ng-container >
                                                                    <ng-container class="tsbleshow"></ng-container> -->
                                                                    <!-- <ng-template #elesepart>0</ng-template> -->
                                                                <!-- </ng-container> -->
                                                            </td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                            </div>
                                        </div>
                                    </div>
                                    </div>

                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="level.ind== 1">
                                    <ng-container *ngIf="level.expanded">
                                        <div class="card">
                                            <div class="card-body">
                                        <div id="expance-sheet">
                                            <!-- <table class="table table-bordered" style="width: 93%;margin-left: 64px;" fixed-header id="commonstyle">
                                                <thead > -->
                                                    <div style="margin-top: 2%;" class="tableFixHead">
                                                        <table class="table table-bordered"  fixed-header>
                                                            <thead>
                                                    <tr class="backcolor" >
                                                    <th >Name</th>
                                                    <th *ngFor="let headername of directcost_headername"
                                                        style=" white-space: nowrap;">
                                                        {{ headername }}
                                                    </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let Data of directcost;index as i;let last=last">
                                                        <td [ngStyle]="{'padding':'5px','padding-left':Data.Padding_left}" >
                                                            <ng-container *ngIf="!last"> 
                                                                <div *ngIf="Data.Padding_left!=100px">
                                                                    <a [style]="{ color: Data.color }"
                                                                    class="ng-binding"
                                                                    (click)="exp_treelevel_click(level.ind,i,Data,directcost)">
                                                                    
                                                                    {{Data?.name}}</a>
                                                                </div>
                                                                <div *ngIf="Data.Padding_left==120px"  [style]="{ color: Data.color }">
                                                                    {{Data?.name}}
                                                                </div>
                                                            </ng-container>
                                                            <ng-container *ngIf="last" [style]="{ color: Data.color }">
                                                               
                                                                {{Data?.name}}
                                                            </ng-container>
                                                            
                                                        </td>
                                                        
                                                            <td class="tablechange" *ngFor="let val of Data.amount" style="text-align: right;">
                                                                <div *ngIf="val==0">0.00</div>
                                                                <div *ngIf="val!=0"> {{val/10000000 | number : '1.2-2'}}</div>

                                                               
                                                                <!-- <ng-container >
                                                                    <ng-container class="tsbleshow"></ng-container> -->
                                                                    <!-- <ng-template #elesepart>0</ng-template> -->
                                                                <!-- </ng-container> -->
                                                            </td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="level.ind== 2">
                                    <ng-container *ngIf="level.expanded">
                                        <div class="card">
                                            <div class="card-body">
                                        <div id="expance-sheet">
                                            <!-- <table class="table table-bordered" style="width: 93%;margin-left: 64px;" fixed-header id="commonstyle">
                                                <thead > -->
                                                    <div style="margin-top: 2%;" class="tableFixHead">
                                                        <table class="table table-bordered"  fixed-header>
                                                            <thead>
                                                    <tr class="backcolor" >
                                                    <th >Name</th>
                                                    <th *ngFor="let headername of otheroperexp_headername"
                                                        style=" white-space: nowrap;">
                                                        {{ headername }}
                                                    </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let Data of otheroperexp;index as i;let last=last">
                                                        <td [ngStyle]="{'padding':'5px','padding-left':Data.Padding_left}" >
                                                            <ng-container *ngIf="!last"> 
                                                                <div *ngIf="Data.Padding_left!=100px">
                                                                    <a [style]="{ color: Data.color }"
                                                                    class="ng-binding"
                                                                    (click)="exp_treelevel_click(level.ind,i,Data,otheroperexp)">
                                                                    
                                                                    {{Data?.name}}</a>
                                                                </div>
                                                                <div *ngIf="Data.Padding_left==120px"  [style]="{ color: Data.color }">
                                                                    {{Data?.name}}
                                                                </div>
                                                            </ng-container>
                                                            <ng-container *ngIf="last" [style]="{ color: Data.color }">
                                                               
                                                                {{Data?.name}}
                                                            </ng-container>
                                                            
                                                        </td>
                                                        
                                                            <td class="tablechange" *ngFor="let val of Data.amount" style="text-align: right;">
                                                                <div *ngIf="val==0">0.00</div>
                                                                <div *ngIf="val!=0"> {{val/10000000 | number : '1.2-2'}}</div>

                                                               
                                                                <!-- <ng-container >
                                                                    <ng-container class="tsbleshow"></ng-container> -->
                                                                    <!-- <ng-template #elesepart>0</ng-template> -->
                                                                <!-- </ng-container> -->
                                                            </td>
                                                        
                                                    </tr>
                                                </tbody>
                                            </table>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="level.ind== 4">
                                    <ng-container *ngIf="level.expanded">
                                        <div class="card">
                                            <div class="card-body">
                                                <div>
                                                    <div style="margin-top: 2%;" class="tableFixHead">
                                                        <table class="table table-bordered"  fixed-header>
                                                            <thead>
                                                                <tr class="backcolor">
                                                                    <th>Name</th>
                                                                    <!-- <th>Amount</th> -->
                                                                    <th *ngFor="let header_data of allocationheader" >{{header_data}}</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let allocation of allocationval">
                                                                    <td>{{allocation?.name}}</td>
                                                                    <td *ngFor="let amount of allocation?.amount">
                                                                        <div *ngIf="amount==0">0.00</div>
                                                                        <div *ngIf="amount!=0">{{amount /10000000 | number:'1.1-2'}}</div>
                                                                    </td>
                                                                <!-- <ng-container *ngFor="let allocation of allocationval">
                                                                    <tr >
                                                                        <td style="padding:5px;padding-left:10px"><div *ngIf="allocation?.bscc_data?.length!=0">{{allocation?.bscc_data?.name}}</div><div *ngIf="allocation?.bs_data?.length!=0">-{{allocation?.bs_data?.name}}</div><div *ngIf="allocation?.cc_data?.length!=0">-{{allocation?.cc_data?.name}}</div></td>
                                                                        <td>{{allocation?.amount}}</td>
                                                                    </tr>
                                                                    <tr *ngFor="let data of allocation?.to_data">
                                                                        <td style="padding:5px;padding-left:50px"><div *ngIf="data?.bscc_data?.length!=0">{{data?.bscc_data?.name}}</div><div *ngIf="data?.bs_data?.length!=0">-{{data?.bs_data?.name}}</div><div *ngIf="data?.cc_data?.length!=0">-{{data?.cc_data?.name}}</div></td>
                                                                        <td>{{data?.amount}}</td>
                                                                    </tr>
                                                                   
                                                                </ng-container> -->


                                                                 <!-- <tr *ngFor="let allocation of allocationval">
                                                                        <td>{{allocation?.name}}</td>
                                                                        <ng-container  *ngFor="let header_data of allocationheader">
                                                                            <td class="tablechange" *ngFor="let amount of allocation?.amount">
                                                                                <div *ngIf="header_data==allocation.value">{{amount/10000000 | number : '1.2-2'}}</div>                                        
                                                                            </td>
                                                                        </ng-container> -->


                                                                        <!-- <td *ngFor="let amount of allocationval?.amount">{{amount/10000000}}</td> -->
                                                                    </tr>
                                                                <!-- <tr *ngFor="let allocation of allocationval;let i=index">
                                                                    <ng-container 
                                                                    style="padding:5px;padding-left:10px">
                                                                        <td>({{allocation?.bscc_data?.code}}){{allocation?.bscc_data?.name}}-({{allocation?.bs_data?.code}}){{allocation?.bs_data?.name}}-({{allocation?.cc_data?.code}}){{allocation?.cc_data?.name}}</td>
                                                                        <td>{{allocation?.amount}}</td>
                                                                    </ng-container>
                                                                    <ng-container *ngFor="let data of allocation?.to_data"  style="padding:5px;padding-left:50px">
                                                                        <td>({{data?.bscc_data?.code}}){{data?.bscc_data?.name}}-({{data?.bs_data?.code}}){{data?.bs_data?.name}}-({{data?.cc_data?.code}}){{data?.cc_data?.name}}{{data?.cc_data?.name}}</td>
                                                                        <td>{{data?.amount}}</td>
                                                                    </ng-container>
                                                                    </tr> -->
                                                                   
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </tbody>
                        </table>
                        </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="modal fade bd-fileupload-modal-lg" data-toggle="modal" data-backdrop="static" data-keyboard="false"
        tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabels">
        <div class="modal-dialog modal-lg" style="padding-top: 7%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">{{filed_name}} &nbsp; Upload</h2>
                    <button type="button" class="close" (click)="clear_filedetails()" #closepop data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">



                    <div class="card">
                        <div class="card-body" style="margin-top: 2%;margin-bottom: 2%;">

                            <div class="input-group mb-3">

                                <div class="custom-file">
                                    <input type="file" [formControl]='clientinput' id="uploadFile" class="choose"
                                    (change)="upload_file($event)" accept=".xlsx">


                                </div>
                            </div>
                        </div>
                        <!-- <div class="card-footer">
                            <button class="btn btn-outline-secondary" type="button"
                                (click)="fileupload_activeclient(clientinput,1)" style="float:right ;"><i
                                    class="fas fa-file-import"></i> Active-Client File Upload
                            </button>
                        </div> -->
                    </div>

                    <!-- <input (click)="fileupload($event)" type="file"> -->
                    <!-- <input name="file-upload-field" (click)="fileupload($event)" class="file-upload-field" id="formFileSm" type="file"> -->
                </div>


                <div class="modal-footer">
                    <button class="btn btn-outline-primary" type="button" style="float: right;" (click)="upload(numberoffiled)" >
                        Upload
                    </button>
                    <button class="btn btn-outline-secondary" type="button" data-dismiss="modal" style="float: right ;"
                        (click)="clear_filedetails()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade bd-otheroperatingexpupload-modal-lg" data-toggle="modal" data-backdrop="static" data-keyboard="false"
    tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabels">
    <div class="modal-dialog modal-lg" style="padding-top: 7%;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Other Operating Expense &nbsp;&nbsp; File Upload</h2>
                <button type="button" class="close" (click)="clear_filedetails()" #closepopexp data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">



                <div class="card">
                    <div class="card-body" style="margin-top: 2%;margin-bottom: 2%;">

                        <div class="input-group mb-3">
                            <form [formGroup]="otheroperating">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Enter The Page Number</mat-label>
                                                <input matInput placeholder="Page Number" type="number" autocomplete="off" formControlName="pagenum" min="1" oninput="validity.valid||(value='');" required>
                                            </mat-form-field>  
                                        </div>
                                        <div class="col-md-6">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Enter The Page Size</mat-label>
                                                <input matInput placeholder="Page Size" type="number" autocomplete="off" formControlName="pagesize" min="1" oninput="validity.valid||(value='');" required>
                                            </mat-form-field>  
                                        </div>
                                        <div class="col-md-6">
                                            <mat-form-field appearance="outline" class="example-full-width">
                                                <mat-label>From Date</mat-label>
                                                <input matInput [matDatepicker]="transactionfromdatepicker" formControlName="transactionstartdate"
                                                   (dateChange)="transactiontodate($event.value)" readonly required>
                                                <mat-datepicker-toggle matSuffix [for]="transactionfromdatepicker">
                                                   
                                                </mat-datepicker-toggle>
                                                <mat-datepicker #transactionfromdatepicker startView="multi-year"></mat-datepicker>
                                            </mat-form-field>
                                        </div>
                                        <div class="col-md-6">
                                            <mat-form-field appearance="outline" class="example-full-width" >
                                                <mat-label> To Date</mat-label>
                                                <input matInput [matDatepicker]="transactiontodatepicker" formControlName="transactiontodate"
                                                    [min]="transation_minDate"  readonly required>
                                                <mat-datepicker-toggle matSuffix [for]="transactiontodatepicker" [disabled]="otheroperating.value.transactionstartdate==''|| otheroperating.value.transactionstartdate == null || otheroperating.value.transactionstartdate== undefined">
                                                    <mat-icon matDatepickerToggleIcon
                                        (click)="trancationmin_todate(otheroperating.value.transactionstartdate)" >calendar_today
                                    </mat-icon>
                                                </mat-datepicker-toggle>
                                                <mat-datepicker #transactiontodatepicker startView="multi-year"></mat-datepicker>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                           
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-primary" type="button" style="float: right;" (click)="otheroperatingupload(otheroperating)" >
                    Upload
                </button>
                <button class="btn btn-outline-secondary" type="button" data-dismiss="modal" style="float: right ;"
                    (click)="clear_filedetails()">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

</div>